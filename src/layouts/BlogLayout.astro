---
import AstroshipLayout from './AstroshipLayout.astro';
import Container from '../components/container.astro';
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, author, publishDate, modifiedDate, image, category, readingTime } = post.data;
---

<AstroshipLayout
  title={`${title} - Shout.com`}
  description={description}
>
  <article>
    <!-- Article Header -->
    <section class="py-16 bg-gray-50">
      <Container>
        <div class="max-w-3xl mx-auto">
          <!-- Breadcrumb -->
          <nav class="text-sm text-gray-500 mb-6">
            <a href="/" class="text-primary hover:underline">Home</a>
            <span class="mx-2">›</span>
            <a href="/blog/" class="text-primary hover:underline">Blog</a>
            <span class="mx-2">›</span>
            <span class="text-gray-600">{title}</span>
          </nav>

          {category && (
            <span class="inline-block bg-primary text-white text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide mb-4">
              {category}
            </span>
          )}

          <h1 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mb-6">{title}</h1>

          <div class="flex flex-wrap gap-4 text-sm text-gray-500 mb-8 pb-6 border-b border-gray-200">
            {author && <span class="font-medium">By {author}</span>}
            {publishDate && (
              <time datetime={publishDate.toISOString()}>
                {publishDate.toLocaleDateString('en-US', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric'
                })}
              </time>
            )}
            {readingTime && <span>{readingTime}</span>}
          </div>

          {image && (
            <div class="rounded-lg overflow-hidden shadow-lg">
              <img
                src={image.src}
                alt={image.alt}
                class="w-full h-auto"
                loading="eager"
              />
            </div>
          )}
        </div>
      </Container>
    </section>

    <!-- Article Content -->
    <section class="py-16">
      <Container>
        <div class="max-w-3xl mx-auto prose prose-lg prose-gray prose-headings:font-bold prose-a:text-primary prose-a:no-underline hover:prose-a:underline">
          <slot />
        </div>
      </Container>
    </section>

    <!-- Article Footer -->
    <section class="py-16 bg-gray-50">
      <Container>
        <div class="max-w-3xl mx-auto">
          {modifiedDate && publishDate && modifiedDate > publishDate && (
            <p class="text-sm text-gray-500 italic mb-6">
              Last updated: {modifiedDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              })}
            </p>
          )}

          <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 pt-6 border-t border-gray-200">
            <a href="/blog/" class="text-primary font-semibold hover:underline">
              ← Back to Blog
            </a>
            <div class="flex items-center gap-3 text-sm">
              <span class="text-gray-500">Share:</span>
              <a
                href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(Astro.url.href)}`}
                target="_blank"
                rel="noopener noreferrer"
                class="px-4 py-2 border border-gray-200 rounded-md text-gray-600 hover:bg-primary hover:text-white hover:border-primary transition-colors"
              >
                Twitter
              </a>
              <a
                href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(Astro.url.href)}`}
                target="_blank"
                rel="noopener noreferrer"
                class="px-4 py-2 border border-gray-200 rounded-md text-gray-600 hover:bg-primary hover:text-white hover:border-primary transition-colors"
              >
                LinkedIn
              </a>
            </div>
          </div>
        </div>
      </Container>
    </section>
  </article>
</AstroshipLayout>

