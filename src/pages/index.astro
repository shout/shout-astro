---
import AstroshipLayout from "../layouts/AstroshipLayout.astro";
import Container from "../components/container.astro";
import Link from "../components/ui/link.astro";
import { Icon } from "astro-icon/components";
import CustomerLogos from "../components/customer-logos.astro";

// Hero demo components
import HeroDemoContainer from "../components/hero-demo/HeroDemoContainer.astro";
import FormCard from "../components/hero-demo/FormCard.astro";
import FormQuestion from "../components/hero-demo/FormQuestion.astro";
import TextInput from "../components/hero-demo/TextInput.astro";
import StarRating from "../components/hero-demo/StarRating.astro";
import MultipleChoice from "../components/hero-demo/MultipleChoice.astro";
import ResultPanel from "../components/hero-demo/ResultPanel.astro";
---

<AstroshipLayout
  title="Shout - Forms, Surveys & Shared Inbox for Teams"
  description="Build forms and surveys that flow into a shared inbox. Collect responses, reply directly, and manage conversations as a team. Start your 14-day free trial."
>
  <!-- Hero Section -->
  <section class="py-16">
    <Container>
      <div class="text-center max-w-4xl mx-auto mb-12">
        <h1 class="text-5xl lg:text-6xl font-bold lg:tracking-tight mb-6">
          Collect responses.<br/>
          <span class="text-primary">Continue the conversation.</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Build forms and surveys that flow into a shared inbox.
          Every submission becomes a conversation your team can reply to.
        </p>
      </div>

      <!-- CTA -->
      <div class="flex justify-center items-center gap-3 mb-8">
        <a href="/signup/" class="inline-flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-all shadow-sm">
          Start Free Trial
          <Icon name="bx:right-arrow-alt" class="w-5 h-5" />
        </a>
        <a href="/forms/" class="inline-flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-all">
          See what you can build
        </a>
      </div>

      <!-- Visual: Form → Inbox flow (Animated) - Overlapping card stack -->
      <HeroDemoContainer id="hero-demo" rightWidth="md:w-[60%]">
        <FormCard slot="left" title="How are we doing?" id="form-card">
          <FormQuestion number={1} question="Please provide your contact details." id="q1" barVisible={true}>
            <div class="grid grid-cols-2 gap-2 mb-2">
              <TextInput id="fname" label="First Name" />
              <TextInput id="lname" label="Last Name" />
            </div>
            <TextInput id="email" label="Email Address" />
          </FormQuestion>

          <FormQuestion number={2} question="How would you rate our service?" id="q2">
            <StarRating id="stars" />
          </FormQuestion>

          <FormQuestion number={3} question="Would you recommend us to a friend?" id="q3" class="">
            <MultipleChoice id="recommend" optionA="Yes" optionB="No" />
          </FormQuestion>
        </FormCard>

        <ResultPanel slot="right" title="Team Inbox" id="inbox-panel" windowChrome={true} avatars={[{ letter: "T", color: "bg-purple-500" }, { letter: "J", color: "bg-green-500" }]}>
          <div class="flex h-[340px]">
            <!-- Ticket list sidebar -->
            <div class="w-[140px] border-r border-gray-200 bg-gray-50/50 flex-shrink-0 overflow-hidden">
              <div class="px-3 py-2 bg-primary/10 border-l-2 border-primary cursor-pointer">
                <div class="flex items-center gap-2 mb-1">
                  <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium">S</div>
                  <span class="text-xs font-medium text-gray-800 truncate">Sarah Johnson</span>
                </div>
                <p class="text-[10px] text-gray-500 truncate">How are we doing?</p>
              </div>
              <div class="px-3 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                <div class="flex items-center gap-2 mb-1">
                  <div class="w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-medium">M</div>
                  <span class="text-xs font-medium text-gray-700 truncate">Mike Chen</span>
                </div>
                <p class="text-[10px] text-gray-400 truncate">Product feedback</p>
              </div>
              <div class="px-3 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                <div class="flex items-center gap-2 mb-1">
                  <div class="w-5 h-5 rounded-full bg-orange-500 flex items-center justify-center text-white text-[10px] font-medium">A</div>
                  <span class="text-xs font-medium text-gray-700 truncate">Alex Rivera</span>
                </div>
                <p class="text-[10px] text-gray-400 truncate">Support request</p>
              </div>
              <div class="px-3 py-2 hover:bg-gray-50 cursor-pointer opacity-60">
                <div class="flex items-center gap-2 mb-1">
                  <div class="w-5 h-5 rounded-full bg-pink-500 flex items-center justify-center text-white text-[10px] font-medium">E</div>
                  <span class="text-xs font-medium text-gray-700 truncate">Emma Wilson</span>
                </div>
                <p class="text-[10px] text-gray-400 truncate">Event registration</p>
              </div>
            </div>

            <!-- Conversation detail -->
            <div class="flex-1 flex flex-col p-3">
              <div class="space-y-2 flex-1 flex flex-col overflow-y-auto">
                <div id="chat-msg-1" class="flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                  <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">S</div>
                  <div class="bg-gray-100 rounded-xl rounded-tl-sm px-2.5 py-1.5 max-w-[90%]">
                    <p class="text-[10px] font-medium text-gray-500 mb-1">Sarah Johnson</p>
                    <div class="text-[10px] text-gray-500 mb-1.5 pb-1.5 border-b border-gray-200">
                      <p><span class="font-medium">Rating:</span> ★★★★☆</p>
                      <p><span class="font-medium">Recommend:</span> Yes</p>
                    </div>
                    <p class="text-xs text-gray-700">Looking forward to hearing from you!</p>
                  </div>
                </div>
                <div id="chat-msg-2" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                  <div class="bg-amber-50 border border-amber-200 rounded-xl rounded-tr-sm px-2.5 py-1.5 max-w-[85%]">
                    <p class="text-[10px] text-amber-600 font-medium mb-0.5">Internal note</p>
                    <p class="text-xs text-amber-900">@Tom another happy customer! Can you follow up?</p>
                  </div>
                  <div class="w-5 h-5 rounded-full bg-green-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">J</div>
                </div>
                <div id="chat-msg-3" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                  <div class="bg-gray-900 text-white rounded-xl rounded-tr-sm px-2.5 py-1.5 max-w-[85%]">
                    <p class="text-xs">Thanks for the great feedback Sarah!</p>
                  </div>
                  <div class="w-5 h-5 rounded-full bg-purple-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">T</div>
                </div>
              </div>
              <div class="flex gap-2 pt-2 mt-auto border-t border-gray-100">
                <div class="flex-1 bg-gray-50 rounded-full px-3 py-1 text-xs text-gray-400">Reply...</div>
                <button class="bg-gray-900 text-white w-6 h-6 rounded-full flex items-center justify-center">
                  <Icon name="bx:send" class="w-3 h-3" />
                </button>
              </div>
            </div>
          </div>
        </ResultPanel>
      </HeroDemoContainer>

      <script>
        function runHeroAnimation() {
          const timeline = [
            // Phase 1: Type name fields (q1 bar already visible)
            { delay: 500, action: () => window.typeText_fname('Sarah', 80) },
            { delay: 1300, action: () => window.typeText_lname('Johnson', 80) },
            { delay: 2100, action: () => window.typeText_email('sarah@company.com', 50) },

            // Phase 2: Star rating (progress + yellow bar animate together)
            { delay: 3500, action: () => {
              window['form-cardSetProgress'](33);
              window.hideBar_q1();
              window.showBar_q2();
            }},
            { delay: 4000, action: () => window.fillStars_stars(4) },

            // Phase 3: Multiple choice (progress + yellow bar animate together)
            { delay: 4700, action: () => {
              window['form-cardSetProgress'](66);
              window.hideBar_q2();
              window.showBar_q3();
            }},
            { delay: 5200, action: () => window.selectOption_recommend('a') },
            { delay: 5900, action: () => window['form-cardSetProgress'](100) },

            // Phase 4: Transition to inbox - swap card positions
            { delay: 6500, action: () => window['hero-demoFocusPanel']('right') },

            // Phase 5: Chat messages appear
            { delay: 7000, action: () => showChatMessage('chat-msg-1') },
            { delay: 8000, action: () => showChatMessage('chat-msg-2') },
            { delay: 9500, action: () => showChatMessage('chat-msg-3') },

            // Reset and loop
            { delay: 18000, action: () => resetAnimation() },
          ];

          timeline.forEach(item => {
            setTimeout(item.action, item.delay);
          });
        }

        function showChatMessage(msgId) {
          const msg = document.getElementById(msgId);
          msg.classList.remove('opacity-0', 'translate-y-4');
          msg.classList.add('opacity-100', 'translate-y-0');
        }

        function resetAnimation() {
          // Reset progress bar
          window['form-cardSetProgress'](0);

          // Reset yellow bars (q1 stays visible)
          window.showBar_q1();
          window.hideBar_q2();
          window.hideBar_q3();

          // Reset text fields
          window.resetText_fname();
          window.resetText_lname();
          window.resetText_email();

          // Reset stars
          window.resetStars_stars();

          // Reset multiple choice
          window.resetOption_recommend();

          // Reset chat messages
          ['chat-msg-1', 'chat-msg-2', 'chat-msg-3'].forEach(id => {
            const msg = document.getElementById(id);
            msg.classList.add('opacity-0', 'translate-y-4');
            msg.classList.remove('opacity-100', 'translate-y-0');
          });

          // Reset focus to form
          window['hero-demoFocusPanel']('left');

          // Restart animation
          setTimeout(runHeroAnimation, 1000);
        }

        // Start animation when page loads and after view transitions
        document.addEventListener('DOMContentLoaded', () => setTimeout(runHeroAnimation, 1000));
        document.addEventListener('astro:after-swap', () => setTimeout(runHeroAnimation, 1000));
      </script>

    </Container>
  </section>

  <!-- Customer Logos -->
  <CustomerLogos />

  <!-- Two sides of Shout -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">Two tools, one workflow</h2>
        <p class="text-lg mt-4 text-gray-600 max-w-2xl mx-auto">
          Most form builders stop at collection. Shout keeps going.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <!-- Collect side -->
        <a href="/forms/" class="group block bg-white rounded-2xl border border-gray-200 p-8 hover:shadow-xl hover:border-primary transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:collection" class="w-8 h-8 text-primary" />
          </div>
          <h3 class="text-2xl font-bold mb-3">Collect</h3>
          <p class="text-gray-600 mb-6">Build forms, surveys, quizzes and calculators with our drag-and-drop builder. Privacy-first with GDPR compliance built in.</p>
          <div class="flex flex-wrap gap-2">
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Surveys</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Forms</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Quizzes</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Calculators</span>
          </div>
        </a>

        <!-- Respond side -->
        <a href="/shared-inbox/" class="group block bg-white rounded-2xl border border-gray-200 p-8 hover:shadow-xl hover:border-primary transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:conversation" class="w-8 h-8 text-primary" />
          </div>
          <h3 class="text-2xl font-bold mb-3">Respond</h3>
          <p class="text-gray-600 mb-6">Every submission flows into a shared inbox. Reply directly and your response lands in their email. Work together as a team.</p>
          <div class="flex flex-wrap gap-2">
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Shared Inbox</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Team Collaboration</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Contact Hub</span>
          </div>
        </a>
      </div>
    </Container>
  </section>

  <!-- Why this matters -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="mb-12">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">What makes this different</h2>
        <p class="text-lg mt-4 text-gray-600">
          Form builders treat responses as data. We treat them as conversations.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-white rounded-xl p-6 border border-gray-200">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:link" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Natively integrated</h3>
          <p class="text-gray-600">Forms and inbox built together from day one. No Zapier required, no syncing delays, no broken connections.</p>
        </div>

        <div class="bg-white rounded-xl p-6 border border-gray-200">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:group" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Built for teams</h3>
          <p class="text-gray-600">Assign conversations, leave internal notes, see who's handling what. No more "did anyone reply to this?"</p>
        </div>

        <div class="bg-white rounded-xl p-6 border border-gray-200">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:shield" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Privacy-first</h3>
          <p class="text-gray-600">GDPR compliance built in. Track consent, manage data retention, and keep your respondents' data secure.</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Use cases hint -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">Works for</h2>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto">
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:support" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Customer support</p>
        </div>
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:target-lock" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Lead capture</p>
        </div>
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:happy" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Feedback collection</p>
        </div>
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:calendar-event" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Event registration</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Final CTA -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="text-center max-w-3xl mx-auto">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mb-6">Ready to try it?</h2>
        <p class="text-lg text-gray-600 mb-8">
          Start collecting responses and replying to them in minutes.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Link href="https://identity.shout.com/Account/Register">Start your Free Trial</Link>
          <Link style="outline" href="/pricing/">View Pricing</Link>
        </div>
      </div>
    </Container>
  </section>
</AstroshipLayout>
