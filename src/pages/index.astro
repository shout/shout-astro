---
import AstroshipLayout from "../layouts/AstroshipLayout.astro";
import Container from "../components/container.astro";
import Link from "../components/ui/link.astro";
import { Icon } from "astro-icon/components";
import CustomerLogos from "../components/customer-logos.astro";
---

<AstroshipLayout
  title="Shout - Forms, Surveys & Shared Inbox for Teams"
  description="Build forms and surveys that flow into a shared inbox. Collect responses, reply directly, and manage conversations as a team. Start your 14-day free trial."
>
  <!-- Hero Section -->
  <section class="py-16">
    <Container>
      <div class="text-center max-w-4xl mx-auto mb-12">
        <h1 class="text-5xl lg:text-6xl font-bold lg:tracking-tight mb-6">
          Collect responses.<br/>
          <span class="text-primary">Continue the conversation.</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Build forms and surveys that flow into a shared inbox.
          Every submission becomes a conversation your team can reply to.
        </p>
      </div>

      <!-- Visual: Form → Inbox flow (Animated) -->
      <div class="max-w-5xl mx-auto mb-10" id="hero-demo">
        <div class="grid md:grid-cols-[1fr_auto_1fr] gap-4 items-stretch">
          <!-- Form side (matching Shout survey style) -->
          <div class="bg-[#2A98C6] rounded-xl shadow-lg p-6 pb-10 flex flex-col relative overflow-hidden">
            <!-- Yellow progress bar at top -->
            <div id="progress-bar" class="absolute top-0 left-0 w-0 h-1 bg-yellow-400 transition-all duration-500"></div>

            <!-- Title -->
            <h3 class="text-xl font-bold text-white mb-8">How are we doing?</h3>

            <!-- Question 1: Contact details -->
            <div class="flex gap-2 mb-10">
              <div id="bar-q1" class="flex-shrink-0 w-0.5 bg-yellow-400 rounded-full h-full transition-all duration-300"></div>
              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2">
                  <span class="w-5 h-5 rounded-full border border-white/50 text-xs flex items-center justify-center text-white/70">1</span>
                  <p class="text-sm text-white">Please provide your contact details.</p>
                </div>
                <div class="grid grid-cols-2 gap-2 mb-2 ml-7">
                  <div class="bg-white rounded overflow-hidden relative h-10">
                    <div id="label-fname" class="absolute px-3 text-sm text-gray-400 transition-all duration-200 top-2.5">First Name</div>
                    <div id="field-fname" class="absolute bottom-1.5 px-3 text-sm text-gray-700"></div>
                  </div>
                  <div class="bg-white rounded overflow-hidden relative h-10">
                    <div id="label-lname" class="absolute px-3 text-sm text-gray-400 transition-all duration-200 top-2.5">Last Name</div>
                    <div id="field-lname" class="absolute bottom-1.5 px-3 text-sm text-gray-700"></div>
                  </div>
                </div>
                <div class="bg-white rounded overflow-hidden relative h-10 ml-7">
                  <div id="label-email" class="absolute px-3 text-sm text-gray-400 transition-all duration-200 top-2.5">Email Address</div>
                  <div id="field-email" class="absolute bottom-1.5 px-3 text-sm text-gray-700"></div>
                </div>
              </div>
            </div>

            <!-- Question 2: Star rating -->
            <div class="flex gap-2 mb-10">
              <div id="bar-q2" class="flex-shrink-0 w-0.5 bg-yellow-400 rounded-full h-0 transition-all duration-300"></div>
              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2">
                  <span class="w-5 h-5 rounded-full border border-white/50 text-xs flex items-center justify-center text-white/70">2</span>
                  <p class="text-sm text-white">How would you rate our service?</p>
                </div>
                <div class="flex gap-1 ml-7" id="stars-container">
                  <svg id="star-1" class="w-7 h-7 text-white/40 transition-all duration-200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                  <svg id="star-2" class="w-7 h-7 text-white/40 transition-all duration-200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                  <svg id="star-3" class="w-7 h-7 text-white/40 transition-all duration-200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                  <svg id="star-4" class="w-7 h-7 text-white/40 transition-all duration-200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                  <svg id="star-5" class="w-7 h-7 text-white/40 transition-all duration-200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                </div>
              </div>
            </div>

            <!-- Question 3: Multiple choice -->
            <div class="flex gap-2">
              <div id="bar-q3" class="flex-shrink-0 w-0.5 bg-yellow-400 rounded-full h-0 transition-all duration-300"></div>
              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2">
                  <span class="w-5 h-5 rounded-full border border-white/50 text-xs flex items-center justify-center text-white/70">3</span>
                  <p class="text-sm text-white">Would you recommend us to a friend?</p>
                </div>
                <div class="grid grid-cols-2 gap-2 ml-7">
                  <div id="option-yes" class="flex items-center border border-white/30 rounded overflow-hidden transition-all duration-300 cursor-pointer">
                    <span id="option-yes-letter" class="w-8 h-8 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">A</span>
                    <span class="text-sm text-white px-3">Yes</span>
                  </div>
                  <div id="option-no" class="flex items-center border border-white/30 rounded overflow-hidden transition-all duration-300">
                    <span class="w-8 h-8 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5">B</span>
                    <span class="text-sm text-white px-3">No</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Arrow -->
          <div class="hidden md:flex items-center justify-center">
            <div id="arrow-icon" class="bg-primary/10 rounded-full p-2 transition-all duration-300">
              <Icon name="bx:right-arrow-alt" class="w-6 h-6 text-primary" />
            </div>
          </div>

          <!-- Inbox side - chat style -->
          <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6 flex flex-col min-h-[380px]">
            <div class="flex items-center gap-2 mb-3 pb-2 border-b border-gray-100">
              <Icon name="bx:chat" class="w-5 h-5 text-primary" />
              <span class="text-sm font-medium text-gray-700">Team Inbox</span>
            </div>
            <div class="space-y-2 flex-1 flex flex-col" id="chat-container">
              <!-- Customer message with form data (left) -->
              <div id="chat-msg-1" class="flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-medium flex-shrink-0 mt-1">S</div>
                <div class="bg-gray-100 rounded-2xl rounded-tl-sm px-3 py-2 max-w-[85%]">
                  <p class="text-xs font-medium text-gray-500 mb-1">Sarah Johnson</p>
                  <div class="text-xs text-gray-500 mb-2 pb-2 border-b border-gray-200">
                    <p><span class="font-medium">Rating:</span> ★★★★☆</p>
                    <p><span class="font-medium">Recommend:</span> Yes</p>
                  </div>
                  <p class="text-sm text-gray-700">Looking forward to hearing from you!</p>
                </div>
              </div>
              <!-- Internal note (highlighted) -->
              <div id="chat-msg-2" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                <div class="bg-amber-50 border border-amber-200 rounded-2xl rounded-tr-sm px-3 py-2 max-w-[85%]">
                  <p class="text-xs text-amber-600 font-medium mb-1">Internal note</p>
                  <p id="chat-text-2" class="text-sm text-amber-900"></p>
                </div>
                <div class="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-xs font-medium flex-shrink-0 mt-1">J</div>
              </div>
              <!-- Team reply (right) -->
              <div id="chat-msg-3" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                <div class="bg-gray-900 text-white rounded-2xl rounded-tr-sm px-3 py-2 max-w-[85%]">
                  <p id="chat-text-3" class="text-sm"></p>
                </div>
                <div class="w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs font-medium flex-shrink-0 mt-1">T</div>
              </div>
              <!-- Input area -->
              <div class="flex gap-2 mt-auto pt-2">
                <div class="flex-1 bg-gray-50 rounded-full px-3 py-1.5 text-sm text-gray-400">Reply...</div>
                <button class="bg-gray-900 text-white w-8 h-8 rounded-full flex items-center justify-center">
                  <Icon name="bx:send" class="w-4 h-4" />
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        function runHeroAnimation() {
          const timeline = [
            // Phase 1: Type name fields (bar-q1 already visible)
            { delay: 500, action: () => typeText('field-fname', 'Sarah', 80) },
            { delay: 1300, action: () => typeText('field-lname', 'Johnson', 80) },
            { delay: 2100, action: () => typeText('field-email', 'sarah@company.com', 50) },

            // Phase 2: Star rating (progress + yellow bar animate together)
            { delay: 3500, action: () => {
              document.getElementById('progress-bar').style.width = '33%';
              document.getElementById('bar-q1').style.height = '0';
              document.getElementById('bar-q2').style.height = '100%';
            }},
            { delay: 4000, action: () => flashAndFillStars(4) },

            // Phase 3: Multiple choice (progress + yellow bar animate together)
            { delay: 4700, action: () => {
              document.getElementById('progress-bar').style.width = '66%';
              document.getElementById('bar-q2').style.height = '0';
              document.getElementById('bar-q3').style.height = '100%';
            }},
            { delay: 5200, action: () => selectOption('option-yes') },
            { delay: 5900, action: () => { document.getElementById('progress-bar').style.width = '100%'; }},

            // Phase 4: Transition to inbox
            { delay: 6500, action: () => {
              document.getElementById('arrow-icon').classList.add('scale-125', 'bg-primary/30');
              setTimeout(() => document.getElementById('arrow-icon').classList.remove('scale-125', 'bg-primary/30'), 400);
            }},

            // Phase 5: Chat messages appear with typing
            { delay: 7000, action: () => showChatMessage('chat-msg-1') },
            { delay: 8000, action: () => {
              showChatMessage('chat-msg-2');
              typeChatText('chat-text-2', '@Tom another happy customer! Can you follow up?', 30);
            }},
            { delay: 10000, action: () => {
              showChatMessage('chat-msg-3');
              typeChatText('chat-text-3', 'Thanks for the great feedback Sarah! Let us know if you need anything.', 25);
            }},

            // Reset and loop
            { delay: 18000, action: () => resetAnimation() },
          ];

          timeline.forEach(item => {
            setTimeout(item.action, item.delay);
          });
        }

        function typeText(elementId, text, speed) {
          const element = document.getElementById(elementId);
          const labelId = elementId.replace('field-', 'label-');
          const label = document.getElementById(labelId);
          element.textContent = '';

          // Move label up when typing starts
          if (label) {
            label.classList.remove('top-2.5', 'text-sm');
            label.classList.add('top-1', 'text-[10px]');
          }

          let i = 0;
          const interval = setInterval(() => {
            if (i < text.length) {
              element.textContent += text.charAt(i);
              i++;
            } else {
              clearInterval(interval);
            }
          }, speed);
        }

        function flashAndFillStars(count) {
          const container = document.getElementById('stars-container');

          // Flash effect
          container.classList.add('opacity-50');
          setTimeout(() => {
            container.classList.remove('opacity-50');
            // Fill the stars
            for (let i = 1; i <= count; i++) {
              const star = document.getElementById('star-' + i);
              star.classList.remove('text-white/40');
              star.classList.add('text-white');
              star.setAttribute('fill', 'currentColor');
            }
          }, 200);
        }

        function selectOption(optionId) {
          const option = document.getElementById(optionId);
          const letter = document.getElementById(optionId + '-letter');

          // Pulse effect
          option.classList.add('bg-white/20');
          setTimeout(() => {
            option.classList.remove('bg-white/20');
            option.classList.add('border-white', 'bg-white/10');
            letter.classList.remove('bg-white/5', 'text-white/70', 'border-dashed');
            letter.classList.add('bg-white', 'text-[#2A98C6]');
            letter.innerHTML = '<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 13l4 4L19 7"/></svg>';
          }, 200);
        }

        function showChatMessage(msgId) {
          const msg = document.getElementById(msgId);
          msg.classList.remove('opacity-0', 'translate-y-4');
          msg.classList.add('opacity-100', 'translate-y-0');
        }

        function typeChatText(elementId, text, speed) {
          const element = document.getElementById(elementId);
          element.textContent = '';
          let i = 0;
          const interval = setInterval(() => {
            if (i < text.length) {
              element.textContent += text.charAt(i);
              i++;
            } else {
              clearInterval(interval);
            }
          }, speed);
        }

        function resetAnimation() {
          // Reset progress bar
          document.getElementById('progress-bar').style.width = '0';

          // Reset yellow bars (bar-q1 stays visible)
          document.getElementById('bar-q1').style.height = '100%';
          ['bar-q2', 'bar-q3'].forEach(id => {
            document.getElementById(id).style.height = '0';
          });

          // Reset text fields and labels
          ['fname', 'lname', 'email'].forEach(name => {
            document.getElementById('field-' + name).textContent = '';
            const label = document.getElementById('label-' + name);
            label.classList.add('top-2.5', 'text-sm');
            label.classList.remove('top-1', 'text-[10px]');
          });

          // Reset stars
          for (let i = 1; i <= 5; i++) {
            const star = document.getElementById('star-' + i);
            star.classList.add('text-white/40');
            star.classList.remove('text-white');
            star.setAttribute('fill', 'none');
          }

          // Reset option
          const option = document.getElementById('option-yes');
          const letter = document.getElementById('option-yes-letter');
          option.classList.remove('border-white', 'bg-white/10');
          letter.classList.add('bg-white/5', 'text-white/70', 'border-dashed');
          letter.classList.remove('bg-white', 'text-[#2A98C6]');
          letter.innerHTML = 'A';

          // Reset chat messages
          ['chat-msg-1', 'chat-msg-2', 'chat-msg-3'].forEach(id => {
            const msg = document.getElementById(id);
            msg.classList.add('opacity-0', 'translate-y-4');
            msg.classList.remove('opacity-100', 'translate-y-0');
          });

          // Reset chat text
          ['chat-text-2', 'chat-text-3'].forEach(id => {
            document.getElementById(id).textContent = '';
          });

          // Restart animation
          setTimeout(runHeroAnimation, 1000);
        }

        // Start animation when page loads and after view transitions
        document.addEventListener('DOMContentLoaded', () => setTimeout(runHeroAnimation, 1000));
        document.addEventListener('astro:after-swap', () => setTimeout(runHeroAnimation, 1000));
      </script>

      <!-- CTA -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center mt-12">
        <Link href="https://identity.shout.com/Account/Register">Start your Free Trial</Link>
        <Link style="outline" href="/forms/">See what you can build</Link>
      </div>
      <p class="text-center text-sm text-gray-500 mt-4">14-day Free Trial · No Credit Card Required</p>
    </Container>
  </section>

  <!-- Customer Logos -->
  <CustomerLogos />

  <!-- Two sides of Shout -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">Two tools, one workflow</h2>
        <p class="text-lg mt-4 text-gray-600 max-w-2xl mx-auto">
          Most form builders stop at collection. Shout keeps going.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <!-- Collect side -->
        <a href="/forms/" class="group block bg-white rounded-2xl border border-gray-200 p-8 hover:shadow-xl hover:border-primary transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:collection" class="w-8 h-8 text-primary" />
          </div>
          <h3 class="text-2xl font-bold mb-3">Collect</h3>
          <p class="text-gray-600 mb-6">Build forms, surveys, quizzes and calculators with our drag-and-drop builder. Privacy-first with GDPR compliance built in.</p>
          <div class="flex flex-wrap gap-2">
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Surveys</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Forms</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Quizzes</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Calculators</span>
          </div>
        </a>

        <!-- Respond side -->
        <a href="/shared-inbox/" class="group block bg-white rounded-2xl border border-gray-200 p-8 hover:shadow-xl hover:border-primary transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:conversation" class="w-8 h-8 text-primary" />
          </div>
          <h3 class="text-2xl font-bold mb-3">Respond</h3>
          <p class="text-gray-600 mb-6">Every submission flows into a shared inbox. Reply directly and your response lands in their email. Work together as a team.</p>
          <div class="flex flex-wrap gap-2">
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Shared Inbox</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Team Collaboration</span>
            <span class="text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-full">Contact Hub</span>
          </div>
        </a>
      </div>
    </Container>
  </section>

  <!-- Why this matters -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="mb-12">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">What makes this different</h2>
        <p class="text-lg mt-4 text-gray-600">
          Form builders treat responses as data. We treat them as conversations.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-white rounded-xl p-6 border border-gray-200">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:link" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Natively integrated</h3>
          <p class="text-gray-600">Forms and inbox built together from day one. No Zapier required, no syncing delays, no broken connections.</p>
        </div>

        <div class="bg-white rounded-xl p-6 border border-gray-200">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:group" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Built for teams</h3>
          <p class="text-gray-600">Assign conversations, leave internal notes, see who's handling what. No more "did anyone reply to this?"</p>
        </div>

        <div class="bg-white rounded-xl p-6 border border-gray-200">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:shield" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Privacy-first</h3>
          <p class="text-gray-600">GDPR compliance built in. Track consent, manage data retention, and keep your respondents' data secure.</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Use cases hint -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">Works for</h2>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto">
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:support" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Customer support</p>
        </div>
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:target-lock" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Lead capture</p>
        </div>
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:happy" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Feedback collection</p>
        </div>
        <div class="text-center p-6 rounded-xl hover:bg-gray-50 transition-colors">
          <Icon name="bx:calendar-event" class="w-10 h-10 text-primary mx-auto mb-3" />
          <p class="font-medium">Event registration</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Final CTA -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="text-center max-w-3xl mx-auto">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mb-6">Ready to try it?</h2>
        <p class="text-lg text-gray-600 mb-8">
          Start collecting responses and replying to them in minutes.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Link href="https://identity.shout.com/Account/Register">Start your Free Trial</Link>
          <Link style="outline" href="/pricing/">View Pricing</Link>
        </div>
      </div>
    </Container>
  </section>
</AstroshipLayout>
