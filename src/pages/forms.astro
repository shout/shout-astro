---
import AstroshipLayout from "../layouts/AstroshipLayout.astro";
import Container from "../components/container.astro";
import Button from "../components/ui/button.astro";
import { Icon } from "astro-icon/components";
import CustomerLogos from "../components/customer-logos.astro";
import Features from "../components/features.astro";

// Hero demo components
import HeroDemoContainer from "../components/hero-demo/HeroDemoContainer.astro";
import FormCard from "../components/hero-demo/FormCard.astro";
import FormQuestion from "../components/hero-demo/FormQuestion.astro";
import TextInput from "../components/hero-demo/TextInput.astro";
import StarRating from "../components/hero-demo/StarRating.astro";
import MultipleChoice from "../components/hero-demo/MultipleChoice.astro";
import ResultPanel from "../components/hero-demo/ResultPanel.astro";

const tabs = [
  {
    id: "surveys",
    title: "Surveys",
    icon: "bx:poll",
    video: "https://cdn.freeonlinesurveys.com/Free-Online-Surveys.mp4",
    description: "Collect feedback and insights with powerful survey tools"
  },
  {
    id: "quizzes",
    title: "Quizzes",
    icon: "bx:help-circle",
    video: "https://cdn.freeonlinesurveys.com/Free-Online-Quizzes.mp4",
    description: "Create engaging quizzes that educate and convert"
  },
  {
    id: "forms",
    title: "Forms",
    icon: "bx:file",
    video: "https://cdn.freeonlinesurveys.com/Free-Online-Forms.mp4",
    description: "Capture leads and collect data with custom forms"
  },
  {
    id: "calculators",
    title: "Calculators",
    icon: "bx:calculator",
    video: "https://cdn.freeonlinesurveys.com/Interactive-Calculator-Builder.mp4",
    description: "Build interactive calculators that drive engagement"
  },
];
---

<AstroshipLayout
  title="Forms, Surveys, Quizzes & Calculators - Shout.com"
  description="Build surveys, quizzes, forms and calculators with our easy-to-use drag and drop builder. Start your free trial today."
>
  <!-- Hero Section with Tabbed Video -->
  <section class="py-16">
    <Container>
      <div class="text-center max-w-4xl mx-auto mb-8">
        <h1 class="text-5xl lg:text-6xl font-bold lg:tracking-tight mb-6">
          Build <span class="text-primary">anything</span> you need
        </h1>
        <p class="text-xl text-gray-600">
          Create surveys, quizzes, forms and calculators with our intuitive drag-and-drop builder.
        </p>
      </div>

      <!-- Tabs + CTA -->
      <div class="flex flex-col md:flex-row justify-center items-center gap-3 mb-8">
        <div class="flex w-full md:w-auto md:inline-flex bg-gray-100 md:rounded-full p-1 gap-0 md:gap-1">
          {tabs.map((tab, index) => (
            <button
              data-tab={tab.id}
              class:list={[
                "tab-button flex-1 md:flex-none px-3 md:px-6 py-3 md:rounded-full text-xs md:text-sm font-medium transition-all flex flex-col md:flex-row items-center justify-center gap-1 md:gap-2",
                index === 0 ? "bg-white shadow-sm text-gray-900" : "text-gray-600 hover:text-gray-900"
              ]}
            >
              <Icon name={tab.icon} class="w-5 h-5" />
              <span>{tab.title}</span>
            </button>
          ))}
        </div>
        <a href="https://identity.shout.com/Account/Register" class="hidden md:inline-flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-all shadow-sm">
          Start Free Trial
          <Icon name="bx:right-arrow-alt" class="w-5 h-5" />
        </a>
      </div>

      <!-- Video/Demo Container -->
      <div class="max-w-5xl mx-auto">
        <div class="relative">
          <!-- Forms Hero Demo -->
          <div data-video-panel="forms" class="video-panel hidden">
            <HeroDemoContainer id="forms-demo" rightWidth="md:w-[60%]">
              <FormCard slot="left" title="Job Application" id="forms-form" bgColor="bg-[#2A98C6]">
                <FormQuestion number={1} question="Your details" id="forms-q1" barVisible={true}>
                  <div class="grid grid-cols-2 gap-2 mb-2">
                    <TextInput id="forms-fname" label="First Name" />
                    <TextInput id="forms-lname" label="Last Name" />
                  </div>
                  <TextInput id="forms-email" label="Email Address" />
                </FormQuestion>

                <FormQuestion number={2} question="Position & Experience" id="forms-q2">
                  <MultipleChoice id="forms-position" optionA="Marketing Manager" optionB="Sales Lead" />
                  <div class="mt-2">
                    <MultipleChoice id="forms-experience" optionA="3-5 years" optionB="5+ years" />
                  </div>
                </FormQuestion>

                <FormQuestion number={3} question="Upload your CV" id="forms-q3" class="">
                  <div id="forms-upload" class="border border-dashed border-white/30 rounded-lg p-3 text-center transition-all duration-300">
                    <div id="forms-upload-empty" class="text-white/60">
                      <Icon name="bx:cloud-upload" class="w-6 h-6 mx-auto mb-1" />
                      <p class="text-xs">Click or drag to upload</p>
                    </div>
                    <div id="forms-upload-file" class="hidden">
                      <div class="flex items-center justify-center gap-2 text-white">
                        <Icon name="bx:file" class="w-5 h-5 text-green-400" />
                        <span class="text-sm">resume.pdf</span>
                        <Icon name="bx:check-circle" class="w-4 h-4 text-green-400" />
                      </div>
                    </div>
                  </div>
                </FormQuestion>
              </FormCard>

              <ResultPanel slot="right" title="Team Inbox" id="forms-inbox" windowChrome={true} avatars={[{ letter: "T", color: "bg-purple-500" }, { letter: "J", color: "bg-green-500" }]}>
                <div class="flex h-[340px]">
                  <!-- Ticket list sidebar -->
                  <div class="w-[140px] border-r border-gray-200 bg-gray-50/50 flex-shrink-0 overflow-hidden">
                    <div id="forms-ticket-new" class="px-3 py-2 bg-primary/10 border-l-2 border-primary cursor-pointer opacity-0 transition-all duration-500">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-teal-500 flex items-center justify-center text-white text-[10px] font-medium">R</div>
                        <span class="text-xs font-medium text-gray-800 truncate">Rachel Kim</span>
                      </div>
                      <p class="text-[10px] text-gray-500 truncate">Job Application</p>
                      <div class="flex items-center gap-1 mt-1">
                        <span id="forms-new-badge" class="text-[8px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded transition-all duration-300">New</span>
                        <div id="forms-viewing-indicator" class="flex items-center gap-1 opacity-0 transition-all duration-300">
                          <div class="w-3 h-3 rounded-full bg-green-500 flex items-center justify-center text-white text-[6px]">J</div>
                        </div>
                      </div>
                    </div>
                    <div class="px-3 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium">S</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Sarah Johnson</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Feedback form</p>
                    </div>
                    <div class="px-3 py-2 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-medium">M</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Mike Chen</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Contact form</p>
                    </div>
                  </div>

                  <!-- Conversation detail -->
                  <div class="flex-1 flex flex-col min-w-0">
                    <!-- Conversation header -->
                    <div class="px-3 py-2 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                      <div class="flex items-center gap-2">
                        <div class="w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center text-white text-[10px] font-medium">R</div>
                        <div>
                          <p class="text-xs font-medium text-gray-800">Rachel Kim</p>
                          <p class="text-[9px] text-gray-400">rachel@email.com</p>
                        </div>
                      </div>
                      <div id="forms-collab-indicator" class="flex items-center gap-1 opacity-0 transition-all duration-300">
                        <div class="flex -space-x-1">
                          <div class="w-4 h-4 rounded-full bg-green-500 border border-white flex items-center justify-center text-white text-[7px]">J</div>
                          <div id="forms-collab-tom" class="w-4 h-4 rounded-full bg-purple-500 border border-white flex items-center justify-center text-white text-[7px] opacity-0 transition-all duration-300">T</div>
                        </div>
                        <span class="text-[9px] text-gray-400">viewing</span>
                      </div>
                    </div>

                    <!-- Messages area -->
                    <div id="forms-messages" class="flex-1 p-3 space-y-2 overflow-y-auto">
                      <!-- Form submission message -->
                      <div id="forms-msg-1" class="hidden flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                        <div class="w-5 h-5 rounded-full bg-teal-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">R</div>
                        <div class="bg-gray-100 rounded-xl rounded-tl-sm px-2.5 py-1.5 max-w-[90%]">
                          <div class="flex items-center gap-1.5 mb-1">
                            <Icon name="bx:file" class="w-3 h-3 text-gray-400" />
                            <span class="text-[8px] text-gray-400">via Job Application Form</span>
                          </div>
                          <div class="text-[10px] text-gray-500 mb-1.5 pb-1.5 border-b border-gray-200">
                            <p><span class="font-medium">Position:</span> Marketing Manager</p>
                            <p><span class="font-medium">Experience:</span> 5+ years</p>
                          </div>
                          <div class="flex items-center gap-2 p-1.5 bg-white rounded border border-gray-200">
                            <Icon name="bx:file-blank" class="w-4 h-4 text-red-500" />
                            <div class="flex-1 min-w-0">
                              <p class="text-[10px] font-medium text-gray-700 truncate">resume.pdf</p>
                              <p class="text-[8px] text-gray-400">245 KB</p>
                            </div>
                            <Icon name="bx:download" class="w-3 h-3 text-gray-400" />
                          </div>
                        </div>
                      </div>

                      <!-- Automation label message -->
                      <div id="forms-automation" class="hidden flex justify-center opacity-0 transition-all duration-300">
                        <div class="flex items-center gap-1.5 px-2 py-1 bg-gray-50 rounded-full border border-gray-200">
                          <Icon name="bx:bot" class="w-3 h-3 text-purple-500" />
                          <span class="text-[9px] text-gray-500">Automation added</span>
                          <span class="text-[9px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full">#hiring</span>
                          <span class="text-[9px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded-full">#marketing</span>
                        </div>
                      </div>

                      <!-- Internal thread -->
                      <div id="forms-internal-thread" class="hidden flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                        <div class="max-w-[85%]">
                          <div class="text-right mb-1">
                            <span class="text-[8px] text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded">Internal thread</span>
                          </div>
                          <div class="bg-white border border-gray-200 rounded-xl rounded-tr-sm overflow-hidden">
                            <!-- Jane's message -->
                            <div class="px-2.5 py-2 border-b border-gray-100">
                              <div class="flex items-start gap-1.5">
                                <div class="w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-white text-[7px] font-medium flex-shrink-0 mt-0.5">J</div>
                                <p class="text-[11px] text-gray-600"><span class="inline-flex items-center gap-0.5 px-1 py-0.5 bg-purple-100 text-purple-700 rounded text-[9px] font-medium"><span class="w-2 h-2 rounded-full bg-purple-500 flex items-center justify-center text-white text-[5px]">T</span>Tom</span> great candidate for the role?</p>
                              </div>
                            </div>
                            <!-- Tom's reply -->
                            <div id="forms-internal-tom-reply" class="px-2.5 py-2 opacity-0 transition-all duration-300">
                              <div class="flex items-start gap-1.5">
                                <div class="w-4 h-4 rounded-full bg-purple-500 flex items-center justify-center text-white text-[7px] font-medium flex-shrink-0 mt-0.5">T</div>
                                <p class="text-[11px] text-gray-600">Yes! 5+ yrs is perfect. Let's schedule üëç</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Sent reply -->
                      <div id="forms-sent-reply" class="hidden flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                        <div class="bg-gray-900 text-white rounded-xl rounded-tr-sm px-2.5 py-2 max-w-[85%]">
                          <p class="text-[11px] leading-relaxed">Hi Rachel! Thanks for applying. Your experience looks great - would you be free for a call Thursday?</p>
                          <p class="text-[9px] text-gray-400 mt-1">Just now</p>
                        </div>
                        <div class="flex -space-x-1 flex-shrink-0 mt-0.5">
                          <div class="w-4 h-4 rounded-full bg-green-500 border border-white flex items-center justify-center text-white text-[7px]">J</div>
                          <div class="w-4 h-4 rounded-full bg-purple-500 border border-white flex items-center justify-center text-white text-[7px]">T</div>
                        </div>
                      </div>
                    </div>

                    <!-- Editor -->
                    <div id="forms-editor" class="border-t border-gray-100 flex-shrink-0">
                      <!-- Editor toolbar -->
                      <div id="forms-editor-toolbar" class="flex items-center gap-1 px-2 py-1.5 border-b border-gray-50 opacity-0 transition-all duration-300">
                        <button class="p-1 rounded hover:bg-gray-100 text-gray-400">
                          <Icon name="bx:bold" class="w-3.5 h-3.5" />
                        </button>
                        <button class="p-1 rounded hover:bg-gray-100 text-gray-400">
                          <Icon name="bx:italic" class="w-3.5 h-3.5" />
                        </button>
                        <button class="p-1 rounded hover:bg-gray-100 text-gray-400">
                          <Icon name="bx:link" class="w-3.5 h-3.5" />
                        </button>
                        <div class="flex-1"></div>
                        <button class="flex items-center gap-1 px-2 py-0.5 rounded text-[9px] text-gray-500 hover:bg-gray-100 transition-colors">
                          <Icon name="bx:comment-detail" class="w-3 h-3" />
                          <span>Internal</span>
                        </button>
                      </div>

                      <!-- Editor content -->
                      <div class="relative px-3 py-2 min-h-[50px]">
                        <div id="forms-editor-placeholder" class="text-[11px] text-gray-400">Reply to Rachel...</div>
                        <div id="forms-editor-content" class="text-[11px] text-gray-800 leading-relaxed hidden">
                          <span id="forms-typed-text"></span><span id="forms-cursor" class="relative opacity-0 transition-all duration-300"><span class="absolute -top-4 left-0 px-1 py-0.5 bg-purple-500 text-white text-[8px] rounded whitespace-nowrap">Tom</span><span class="inline-block w-0.5 h-4 bg-purple-500 animate-pulse"></span></span>
                        </div>
                        <button id="forms-send-btn" class="absolute right-2 bottom-2 bg-gray-200 text-gray-400 w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300">
                          <Icon name="bx:send" class="w-3 h-3" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </ResultPanel>
            </HeroDemoContainer>
          </div>

          <!-- Surveys Hero Demo -->
          <div data-video-panel="surveys" class="video-panel block">
            <HeroDemoContainer id="survey-demo" rightWidth="md:w-[55%]">
              <FormCard slot="left" title="Customer Feedback" id="survey-form" bgColor="bg-[#2A98C6]">
                <FormQuestion number={1} question="How would you rate our service?" id="survey-q1" barVisible={true}>
                  <StarRating id="survey-stars" />
                </FormQuestion>

                <FormQuestion number={2} question="How likely are you to recommend us?" id="survey-q2">
                  <!-- Likert Scale 0-10 -->
                  <div class="mt-1 max-w-[280px]">
                    <!-- Gradient bar -->
                    <div class="h-1 rounded-full bg-gradient-to-r from-red-500 via-yellow-400 to-green-500 mb-2"></div>
                    <!-- Numbers -->
                    <div class="flex justify-between">
                      {[0,1,2,3,4,5,6,7,8,9,10].map(n => (
                        <button
                          id={`survey-likert-${n}`}
                          class="w-6 h-6 text-[10px] border border-white/30 rounded bg-white/5 text-white/70 hover:bg-white/20 transition-all duration-200 flex items-center justify-center"
                        >
                          {n}
                        </button>
                      ))}
                    </div>
                    <!-- Labels -->
                    <div class="flex justify-between mt-1">
                      <span class="text-[9px] text-white/50">Not likely</span>
                      <span class="text-[9px] text-white/50">Very likely</span>
                    </div>
                  </div>
                </FormQuestion>

                <FormQuestion number={3} question="Was your issue resolved?" id="survey-q3" class="">
                  <MultipleChoice id="survey-recommend" optionA="Yes" optionB="No" />
                </FormQuestion>

              </FormCard>

              <ResultPanel slot="right" title="Survey Results" id="survey-results" windowChrome={true}>
                <div class="p-4 space-y-6 h-[340px] overflow-y-auto">
                  <!-- Rating Question Results -->
                  <div id="survey-result-rating" class="opacity-0 translate-y-4 transition-all duration-500">
                    <div class="flex items-center gap-2 mb-3">
                      <span class="w-5 h-5 rounded bg-gray-100 text-xs flex items-center justify-center text-gray-600 font-medium">1</span>
                      <p class="text-sm text-gray-700 font-medium">How would you rate our service?</p>
                    </div>
                    <!-- Star display -->
                    <div class="flex items-center gap-1 mb-3">
                      <span id="survey-avg-stars" class="text-2xl text-yellow-400">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                      <span class="text-sm text-gray-500 ml-2"><span id="survey-avg-num">4.0</span> / 5</span>
                    </div>
                    <!-- Rating bars -->
                    <div class="space-y-1.5">
                      <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-500 w-3">5</span>
                        <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                          <div id="survey-bar-5" class="h-full bg-green-500 rounded-full transition-all duration-700" style="width: 0%"></div>
                        </div>
                        <span id="survey-pct-5" class="text-xs text-gray-500 w-8">0%</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-500 w-3">4</span>
                        <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                          <div id="survey-bar-4" class="h-full bg-lime-500 rounded-full transition-all duration-700" style="width: 0%"></div>
                        </div>
                        <span id="survey-pct-4" class="text-xs text-gray-500 w-8">0%</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-500 w-3">3</span>
                        <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                          <div id="survey-bar-3" class="h-full bg-yellow-500 rounded-full transition-all duration-700" style="width: 0%"></div>
                        </div>
                        <span id="survey-pct-3" class="text-xs text-gray-500 w-8">0%</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-500 w-3">2</span>
                        <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                          <div id="survey-bar-2" class="h-full bg-orange-500 rounded-full transition-all duration-700" style="width: 0%"></div>
                        </div>
                        <span id="survey-pct-2" class="text-xs text-gray-500 w-8">0%</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-500 w-3">1</span>
                        <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                          <div id="survey-bar-1" class="h-full bg-red-500 rounded-full transition-all duration-700" style="width: 0%"></div>
                        </div>
                        <span id="survey-pct-1" class="text-xs text-gray-500 w-8">0%</span>
                      </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2"><span id="survey-rating-responses">0</span> responses</p>
                  </div>

                  <!-- Recommend Question Results -->
                  <div id="survey-result-recommend" class="opacity-0 translate-y-4 transition-all duration-500">
                    <div class="flex items-center gap-2 mb-3">
                      <span class="w-5 h-5 rounded bg-gray-100 text-xs flex items-center justify-center text-gray-600 font-medium">2</span>
                      <p class="text-sm text-gray-700 font-medium">Was your issue resolved?</p>
                    </div>
                    <!-- Donut chart and legend -->
                    <div class="flex items-center gap-4">
                      <div class="relative w-24 h-24">
                        <svg viewBox="0 0 36 36" class="w-24 h-24 transform -rotate-90">
                          <circle cx="18" cy="18" r="14" fill="none" stroke="#e5e7eb" stroke-width="4"></circle>
                          <circle id="survey-donut-yes" cx="18" cy="18" r="14" fill="none" stroke="#4ade80" stroke-width="4" stroke-dasharray="0 88" stroke-linecap="round" class="transition-all duration-700"></circle>
                          <circle id="survey-donut-no" cx="18" cy="18" r="14" fill="none" stroke="#38bdf8" stroke-width="4" stroke-dasharray="0 88" stroke-linecap="round" class="transition-all duration-700"></circle>
                        </svg>
                      </div>
                      <div class="space-y-2">
                        <div class="flex items-center gap-2">
                          <div class="w-3 h-3 rounded-sm bg-green-400"></div>
                          <span class="text-sm text-gray-600">Yes</span>
                          <span id="survey-yes-pct" class="text-sm font-medium text-gray-800">0%</span>
                        </div>
                        <div class="flex items-center gap-2">
                          <div class="w-3 h-3 rounded-sm bg-sky-400"></div>
                          <span class="text-sm text-gray-600">No</span>
                          <span id="survey-no-pct" class="text-sm font-medium text-gray-800">0%</span>
                        </div>
                      </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2"><span id="survey-recommend-responses">0</span> responses</p>
                  </div>
                </div>
              </ResultPanel>
            </HeroDemoContainer>
          </div>

          <!-- Quizzes Hero Demo - Single browser with quiz + results -->
          <div data-video-panel="quizzes" class="video-panel hidden">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200 max-w-4xl mx-auto">
              <!-- Window chrome -->
              <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200">
                <div class="flex gap-1.5">
                  <div class="w-3 h-3 rounded-full bg-red-400"></div>
                  <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                  <div class="w-3 h-3 rounded-full bg-green-400"></div>
                </div>
                <span class="text-sm text-gray-500 ml-2">Customer Service Training</span>
              </div>

              <!-- Quiz content area -->
              <div class="h-[400px] relative overflow-hidden">
                <!-- Progress bar -->
                <div id="quiz-progress" class="absolute top-0 left-0 h-1 bg-yellow-400 transition-all duration-500 z-10" style="width: 0%"></div>

                <!-- Questions container (purple background) -->
                <div id="quiz-questions-container" class="bg-gradient-to-br from-purple-600 to-indigo-700 h-full transition-all duration-700">
                  <!-- Question 1 -->
                  <div id="quiz-q1" class="h-full grid grid-cols-2 transition-all duration-500">
                    <div class="p-6 flex flex-col justify-center">
                      <div class="flex items-center gap-2 mb-4">
                        <span class="w-7 h-7 rounded-full bg-white/20 text-sm flex items-center justify-center text-white font-medium">1</span>
                        <span class="text-sm text-white/60">of 3</span>
                      </div>
                      <h3 class="text-xl font-bold text-white mb-5">A customer is upset about a delayed order. What should you do first?</h3>
                      <div class="space-y-3">
                        <div id="quiz-q1-a" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q1-a-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">A</span>
                          <span class="text-sm text-white px-4">Explain company policy</span>
                        </div>
                        <div id="quiz-q1-b" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q1-b-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">B</span>
                          <span class="text-sm text-white px-4">Listen and acknowledge their frustration</span>
                        </div>
                        <div id="quiz-q1-c" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q1-c-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">C</span>
                          <span class="text-sm text-white px-4">Transfer to a manager</span>
                        </div>
                      </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-500/30 to-indigo-600/30 flex items-center justify-center">
                      <Icon name="bx:support" class="w-32 h-32 text-white/30" />
                    </div>
                  </div>

                  <!-- Question 2 (hidden initially) -->
                  <div id="quiz-q2" class="h-full grid grid-cols-2 transition-all duration-500 hidden">
                    <div class="p-6 flex flex-col justify-center">
                      <div class="flex items-center gap-2 mb-4">
                        <span class="w-7 h-7 rounded-full bg-white/20 text-sm flex items-center justify-center text-white font-medium">2</span>
                        <span class="text-sm text-white/60">of 3</span>
                      </div>
                      <h3 class="text-xl font-bold text-white mb-5">Which phrase builds the most rapport with customers?</h3>
                      <div class="space-y-3">
                        <div id="quiz-q2-a" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q2-a-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">A</span>
                          <span class="text-sm text-white px-4">"That's not my department"</span>
                        </div>
                        <div id="quiz-q2-b" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q2-b-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">B</span>
                          <span class="text-sm text-white px-4">"I understand how you feel"</span>
                        </div>
                        <div id="quiz-q2-c" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q2-c-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">C</span>
                          <span class="text-sm text-white px-4">"You'll have to wait"</span>
                        </div>
                      </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-500/30 to-indigo-600/30 flex items-center justify-center">
                      <Icon name="bx:conversation" class="w-32 h-32 text-white/30" />
                    </div>
                  </div>

                  <!-- Question 3 (hidden initially) -->
                  <div id="quiz-q3" class="h-full grid grid-cols-2 transition-all duration-500 hidden">
                    <div class="p-6 flex flex-col justify-center">
                      <div class="flex items-center gap-2 mb-4">
                        <span class="w-7 h-7 rounded-full bg-white/20 text-sm flex items-center justify-center text-white font-medium">3</span>
                        <span class="text-sm text-white/60">of 3</span>
                      </div>
                      <h3 class="text-xl font-bold text-white mb-5">When should you follow up after resolving a complaint?</h3>
                      <div class="space-y-3">
                        <div id="quiz-q3-a" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q3-a-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">A</span>
                          <span class="text-sm text-white px-4">Never, the issue is closed</span>
                        </div>
                        <div id="quiz-q3-b" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q3-b-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">B</span>
                          <span class="text-sm text-white px-4">Within 24-48 hours</span>
                        </div>
                        <div id="quiz-q3-c" class="flex items-center border border-white/30 rounded-lg overflow-hidden transition-all duration-300 cursor-pointer hover:bg-white/10">
                          <span id="quiz-q3-c-letter" class="w-10 h-10 border-r border-dashed border-white/30 text-sm flex items-center justify-center text-white/70 bg-white/5 transition-all duration-300">C</span>
                          <span class="text-sm text-white px-4">Only if they complain again</span>
                        </div>
                      </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-500/30 to-indigo-600/30 flex items-center justify-center">
                      <Icon name="bx:time-five" class="w-32 h-32 text-white/30" />
                    </div>
                  </div>
                </div>

                <!-- Results container (hidden initially, slides in) -->
                <div id="quiz-results-container" class="absolute inset-0 bg-white translate-y-full transition-all duration-700">
                  <div class="h-full flex">
                    <!-- Left side - Answer breakdown -->
                    <div class="w-1/2 p-6 flex flex-col">
                      <p class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-4">Your Answers</p>
                      <div class="space-y-3 flex-1">
                        <div id="quiz-answer-1" class="flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200 opacity-0 -translate-x-4 transition-all duration-500">
                          <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0" />
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-500">Q1: Handling upset customers</p>
                            <p class="text-sm font-medium text-gray-700">Listen and acknowledge</p>
                          </div>
                        </div>
                        <div id="quiz-answer-2" class="flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200 opacity-0 -translate-x-4 transition-all duration-500">
                          <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0" />
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-500">Q2: Building rapport</p>
                            <p class="text-sm font-medium text-gray-700">"I understand how you feel"</p>
                          </div>
                        </div>
                        <div id="quiz-answer-3" class="flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200 opacity-0 -translate-x-4 transition-all duration-500">
                          <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0" />
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-500">Q3: Follow-up timing</p>
                            <p class="text-sm font-medium text-gray-700">Within 24-48 hours</p>
                          </div>
                        </div>
                      </div>

                      <!-- Recommendation -->
                      <div id="quiz-recommendation" class="mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200 opacity-0 translate-y-4 transition-all duration-500">
                        <p class="text-xs font-medium text-purple-600 mb-1">Training Complete</p>
                        <p class="text-sm font-medium text-gray-700">You're ready to deliver great service</p>
                        <button class="mt-2 px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors">
                          View Certificate
                        </button>
                      </div>
                    </div>

                    <!-- Right side - Score display -->
                    <div class="w-1/2 bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center p-6">
                      <div id="quiz-score-display" class="text-center opacity-0 scale-90 transition-all duration-500">
                        <div class="w-28 h-28 mx-auto mb-4 rounded-full bg-white/20 flex items-center justify-center">
                          <span id="quiz-score" class="text-4xl font-bold text-white">100%</span>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-2">Great Job!</h3>
                        <p class="text-white/80">You scored 3 out of 3</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Calculators Hero Demo - 2-col form with quote + inbox -->
          <div data-video-panel="calculators" class="video-panel hidden">
            <HeroDemoContainer id="calc-demo" rightWidth="md:w-[60%]">
              <div slot="left" class="bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden h-full flex flex-col">
                <!-- Window chrome header -->
                <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200">
                  <div class="flex gap-1.5">
                    <div class="w-3 h-3 rounded-full bg-red-400"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                    <div class="w-3 h-3 rounded-full bg-green-400"></div>
                  </div>
                  <span class="text-sm text-gray-500 ml-2">Get Your Quote</span>
                </div>

                <!-- Calculator content -->
                <div class="bg-[#2A98C6] flex-1 relative">
                  <!-- Progress bar -->
                  <div id="calc-progress" class="absolute top-0 left-0 w-full h-1 bg-yellow-400 transition-all duration-500" style="width: 0%"></div>

                  <div class="p-5 pt-6">

                  <div class="grid grid-cols-2 gap-4">
                    <!-- Left column - inputs -->
                    <div class="space-y-3">
                      <div>
                        <label class="text-xs text-white/70 block mb-1">Service Type</label>
                        <div id="calc-service" class="bg-white/10 border border-white/20 rounded px-3 py-2 text-white text-sm">
                          <span class="text-white/40">Select...</span>
                        </div>
                      </div>
                      <div>
                        <label class="text-xs text-white/70 block mb-1">Team Size</label>
                        <div id="calc-team" class="bg-white/10 border border-white/20 rounded px-3 py-2 text-white text-sm">
                          <span class="text-white/40">Select...</span>
                        </div>
                      </div>
                      <div>
                        <label class="text-xs text-white/70 block mb-1">Duration</label>
                        <div id="calc-duration" class="bg-white/10 border border-white/20 rounded px-3 py-2 text-white text-sm">
                          <span class="text-white/40">Select...</span>
                        </div>
                      </div>
                    </div>

                    <!-- Right column - live quote -->
                    <div class="bg-white/10 rounded-lg p-3 border border-white/20">
                      <p class="text-xs text-white/60 mb-2">Your Quote</p>
                      <div id="calc-quote-display" class="text-center py-3">
                        <p id="calc-total" class="text-3xl font-bold text-white">$0</p>
                        <p class="text-xs text-white/60 mt-1">per month</p>
                      </div>
                      <div class="space-y-1 text-xs border-t border-white/20 pt-2 mt-2">
                        <div class="flex justify-between text-white/70">
                          <span>Base price</span>
                          <span id="calc-base">$0</span>
                        </div>
                        <div class="flex justify-between text-white/70">
                          <span>Team seats</span>
                          <span id="calc-seats">$0</span>
                        </div>
                        <div class="flex justify-between text-white/70">
                          <span>Duration discount</span>
                          <span id="calc-discount" class="text-green-300">-$0</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <button id="calc-submit-btn" class="w-full mt-4 bg-yellow-400 hover:bg-yellow-300 text-gray-900 font-medium py-2 rounded-lg text-sm transition-all opacity-50">
                    Get Quote
                  </button>
                  </div>
                </div>
              </div>

              <ResultPanel slot="right" title="Team Inbox" id="calc-inbox" windowChrome={true} avatars={[{ letter: "T", color: "bg-purple-500" }]}>
                <div class="flex h-[340px]">
                  <!-- Ticket list sidebar -->
                  <div class="w-[140px] border-r border-gray-200 bg-gray-50/50 flex-shrink-0 overflow-hidden">
                    <div id="calc-ticket-new" class="px-3 py-2 bg-primary/10 border-l-2 border-primary cursor-pointer opacity-0 transition-all duration-500">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center text-white text-[10px] font-medium">A</div>
                        <span class="text-xs font-medium text-gray-800 truncate">Alex Martin</span>
                      </div>
                      <p class="text-[10px] text-gray-500 truncate">Quote request</p>
                      <div class="flex items-center gap-1 mt-1">
                        <span id="calc-new-badge" class="text-[8px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded transition-all duration-300">New</span>
                      </div>
                    </div>
                    <div class="px-3 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium">S</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Sarah Johnson</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Feedback form</p>
                    </div>
                    <div class="px-3 py-2 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-medium">M</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Mike Chen</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Support</p>
                    </div>
                  </div>

                  <!-- Conversation detail -->
                  <div class="flex-1 flex flex-col min-w-0">
                    <!-- Conversation header -->
                    <div class="px-3 py-2 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                      <div class="flex items-center gap-2">
                        <div class="w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-white text-[10px] font-medium">A</div>
                        <div>
                          <p class="text-xs font-medium text-gray-800">Alex Martin</p>
                          <p class="text-[9px] text-gray-400">alex@company.com</p>
                        </div>
                      </div>
                    </div>

                    <!-- Messages area -->
                    <div id="calc-messages" class="flex-1 p-3 space-y-2 overflow-y-auto">
                      <!-- Quote request message -->
                      <div id="calc-msg-1" class="hidden flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                        <div class="w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">A</div>
                        <div class="bg-gray-100 rounded-xl rounded-tl-sm px-2.5 py-2 max-w-[90%]">
                          <div class="flex items-center gap-1.5 mb-2">
                            <Icon name="bx:calculator" class="w-3.5 h-3.5 text-gray-400" />
                            <span class="text-[9px] text-gray-400">via Quote Calculator</span>
                          </div>
                          <div class="text-xs text-gray-600 space-y-1">
                            <p><span class="font-medium text-gray-700">Service:</span> Professional</p>
                            <p><span class="font-medium text-gray-700">Team:</span> 10-25 people</p>
                            <p><span class="font-medium text-gray-700">Quote:</span> $179/mo</p>
                          </div>
                        </div>
                      </div>

                      <!-- Team reply with onboarding form -->
                      <div id="calc-msg-2" class="hidden flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                        <div class="bg-gray-900 text-white rounded-xl rounded-tr-sm px-2.5 py-2 max-w-[85%]">
                          <p class="text-[11px] leading-relaxed mb-2">Hi Alex! Great choice. Here's the signup form to get started:</p>
                          <div class="bg-white/10 rounded-lg p-2 border border-white/20">
                            <div class="flex items-center gap-2">
                              <div class="w-8 h-8 rounded bg-primary/20 flex items-center justify-center">
                                <Icon name="bx:user-plus" class="w-4 h-4 text-primary" />
                              </div>
                              <div class="flex-1 min-w-0">
                                <p class="text-[10px] text-white/60">Onboarding Form</p>
                                <p class="text-xs font-medium">Professional Plan Signup</p>
                              </div>
                              <Icon name="bx:link-external" class="w-3 h-3 text-white/40" />
                            </div>
                          </div>
                        </div>
                        <div class="w-5 h-5 rounded-full bg-purple-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">T</div>
                      </div>

                      <!-- Customer response -->
                      <div id="calc-msg-3" class="hidden flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                        <div class="w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">A</div>
                        <div class="bg-gray-100 rounded-xl rounded-tl-sm px-2.5 py-1.5 max-w-[90%]">
                          <p class="text-xs text-gray-700">All signed up! Looking forward to getting started üëç</p>
                        </div>
                      </div>

                      <!-- Payment received -->
                      <div id="calc-msg-4" class="hidden flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                        <div class="w-5 h-5 rounded-full bg-[#635bff] flex items-center justify-center text-white flex-shrink-0 mt-0.5">
                          <Icon name="bx:credit-card" class="w-3 h-3" />
                        </div>
                        <div class="bg-green-50 border border-green-200 rounded-xl rounded-tl-sm px-2.5 py-1.5 max-w-[90%]">
                          <p class="text-[10px] font-medium text-green-600 mb-0.5">Stripe payment received</p>
                          <p class="text-xs text-green-800">$179.00 - Professional Plan</p>
                        </div>
                      </div>
                    </div>

                    <!-- Editor -->
                    <div class="border-t border-gray-100 flex-shrink-0">
                      <div class="flex gap-2 p-3">
                        <div class="flex-1 bg-gray-50 rounded-full px-3 py-1.5 text-xs text-gray-400">Reply to Alex...</div>
                        <button class="bg-gray-900 text-white w-7 h-7 rounded-full flex items-center justify-center">
                          <Icon name="bx:send" class="w-3.5 h-3.5" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </ResultPanel>
            </HeroDemoContainer>
          </div>
        </div>
      </div>

    </Container>
  </section>

  <!-- Customer Logos -->
  <CustomerLogos />

  <!-- Feature Highlights -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">One platform, endless possibilities</h2>
        <p class="text-lg mt-4 text-gray-600 max-w-3xl mx-auto">
          Whether you're collecting feedback, generating leads, or engaging your audience, Shout has the tools you need.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <a href="/survey-maker/" class="group block bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg hover:border-primary transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:poll" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Surveys</h3>
          <p class="text-gray-600">Collect feedback, measure satisfaction, and gather insights from your audience.</p>
        </a>

        <a href="/quiz-builder/" class="group block bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg hover:border-primary transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:help-circle" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Quizzes</h3>
          <p class="text-gray-600">Create engaging quizzes for lead generation, education, or entertainment.</p>
        </a>

        <a href="/form-builder/" class="group block bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg hover:border-primary transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:file" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Forms</h3>
          <p class="text-gray-600">Capture leads, register attendees, and collect data with custom forms.</p>
        </a>

        <a href="/custom-calculator-builder/" class="group block bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg hover:border-primary transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors">
            <Icon name="bx:calculator" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Calculators</h3>
          <p class="text-gray-600">Build interactive calculators for ROI, pricing, assessments, and more.</p>
        </a>
      </div>
    </Container>
  </section>

  <!-- Integrated Solutions -->
  <Features />

  <!-- Final CTA -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="text-center max-w-4xl mx-auto">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mb-6">Ready to get started?</h2>
        <p class="text-lg text-gray-600 mb-8">Join thousands of businesses using Shout to collect data and engage their audience.</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href="https://identity.shout.com/Account/Register">Start your Free Trial</Button>
          <Button variant="outline" href="/pricing/">View Pricing</Button>
        </div>
      </div>
    </Container>
  </section>

</AstroshipLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabButtons = document.querySelectorAll('.tab-button');
    const videoPanels = document.querySelectorAll('.video-panel');
    const descriptions = document.querySelectorAll('.tab-description');

    // Tab cycle order
    const tabOrder = ['surveys', 'quizzes', 'forms', 'calculators'];
    let currentTabIndex = 0;

    // Animation state
    let surveyTimeouts = [], quizTimeouts = [], calcTimeouts = [], formsTimeouts = [];
    let surveyRunning = false, quizRunning = false, calcRunning = false, formsRunning = false;

    // Start survey animation on page load (surveys tab is default)
    setTimeout(() => runSurveyAnimation(), 1000);

    // Function to switch to a specific tab
    function switchToTab(tabId) {
      currentTabIndex = tabOrder.indexOf(tabId);

      // Update button styles
      tabButtons.forEach(btn => {
        btn.classList.remove('bg-white', 'shadow-sm', 'text-gray-900');
        btn.classList.add('text-gray-600');
        if (btn.getAttribute('data-tab') === tabId) {
          btn.classList.add('bg-white', 'shadow-sm', 'text-gray-900');
          btn.classList.remove('text-gray-600');
        }
      });

      // Show/hide video panels
      videoPanels.forEach(panel => {
        if (panel.getAttribute('data-video-panel') === tabId) {
          panel.classList.remove('hidden');
          panel.classList.add('block');
        } else {
          panel.classList.add('hidden');
          panel.classList.remove('block');
        }
      });

      // Show/hide descriptions
      descriptions.forEach(desc => {
        if (desc.getAttribute('data-description') === tabId) {
          desc.classList.remove('hidden');
          desc.classList.add('block');
        } else {
          desc.classList.add('hidden');
          desc.classList.remove('block');
        }
      });

      // Stop all animations and reset
      stopSurveyAnimation(); resetSurveyAnimation();
      stopQuizAnimation(); resetQuizAnimation();
      stopCalcAnimation(); resetCalcAnimation();
      stopFormsAnimation(); resetFormsAnimation();

      // Start relevant animation
      setTimeout(() => {
        if (tabId === 'surveys') runSurveyAnimation();
        else if (tabId === 'quizzes') runQuizAnimation();
        else if (tabId === 'calculators') runCalcAnimation();
        else if (tabId === 'forms') runFormsAnimation();
      }, 500);
    }

    // Function to advance to next tab
    function nextTab() {
      currentTabIndex = (currentTabIndex + 1) % tabOrder.length;
      switchToTab(tabOrder[currentTabIndex]);
    }

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');
        switchToTab(tabId);
      });
    });

    // ========== HELPER FUNCTIONS ==========
    function showElement(id) {
      const el = document.getElementById(id);
      if (el) {
        el.classList.remove('hidden', 'opacity-0', 'translate-y-4');
        el.classList.add('opacity-100', 'translate-y-0');
      }
    }

    function hideElement(id) {
      const el = document.getElementById(id);
      if (el) {
        el.classList.add('opacity-0', 'translate-y-4');
        el.classList.remove('opacity-100', 'translate-y-0');
      }
    }

    function selectQuizOption(btnId) {
      const btn = document.getElementById(btnId);
      const letter = document.getElementById(`${btnId}-letter`);
      if (btn && letter) {
        // Pulse effect then highlight
        btn.classList.add('bg-white/20');
        setTimeout(() => {
          btn.classList.remove('bg-white/20');
          btn.classList.add('border-white', 'bg-white/10');
          letter.classList.remove('bg-white/5', 'text-white/70', 'border-dashed');
          letter.classList.add('bg-white', 'text-purple-600');
          letter.innerHTML = '<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 13l4 4L19 7"/></svg>';
        }, 200);
      }
    }

    function resetQuizOption(btnId) {
      const btn = document.getElementById(btnId);
      const letter = document.getElementById(`${btnId}-letter`);
      const originalLetter = btnId.slice(-1).toUpperCase(); // Get A, B, or C from the ID
      if (btn && letter) {
        btn.classList.remove('border-white', 'bg-white/10', 'bg-white/20');
        letter.classList.add('bg-white/5', 'text-white/70', 'border-dashed');
        letter.classList.remove('bg-white', 'text-purple-600');
        letter.innerHTML = originalLetter;
      }
    }

    // ========== SURVEY ANIMATION ==========
    function selectLikert(num) {
      const btn = document.getElementById(`survey-likert-${num}`);
      if (btn) {
        btn.classList.remove('bg-white/5', 'text-white/70', 'border-white/30');
        btn.classList.add('bg-white', 'text-[#2A98C6]', 'border-white', 'font-bold');
      }
    }

    function resetLikert() {
      for (let i = 0; i <= 10; i++) {
        const btn = document.getElementById(`survey-likert-${i}`);
        if (btn) {
          btn.classList.add('bg-white/5', 'text-white/70', 'border-white/30');
          btn.classList.remove('bg-white', 'text-[#2A98C6]', 'border-white', 'font-bold');
        }
      }
    }

    function runSurveyAnimation() {
      if (surveyRunning) return;
      surveyRunning = true;

      const timeline = [
        // Q1: Star rating
        { delay: 500, action: () => window['fillStars_survey-stars'] && window['fillStars_survey-stars'](4) },
        { delay: 1200, action: () => {
          window['survey-formSetProgress'] && window['survey-formSetProgress'](33);
          window['hideBar_survey-q1'] && window['hideBar_survey-q1']();
          window['showBar_survey-q2'] && window['showBar_survey-q2']();
        }},
        // Q2: Likert scale
        { delay: 1800, action: () => selectLikert(8) },
        { delay: 2300, action: () => {
          window['survey-formSetProgress'] && window['survey-formSetProgress'](66);
          window['hideBar_survey-q2'] && window['hideBar_survey-q2']();
          window['showBar_survey-q3'] && window['showBar_survey-q3']();
        }},
        // Q3: Yes/No
        { delay: 2900, action: () => window['selectOption_survey-recommend'] && window['selectOption_survey-recommend']('a') },
        { delay: 3400, action: () => {
          window['survey-formSetProgress'] && window['survey-formSetProgress'](100);
        }},
        { delay: 3900, action: () => window['survey-demoFocusPanel'] && window['survey-demoFocusPanel']('right') },
        { delay: 4800, action: () => { showElement('survey-result-rating'); animateRatingBars(); }},
        { delay: 6000, action: () => { showElement('survey-result-recommend'); animateDonutChart(); }},
        { delay: 11000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        surveyTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function animateRatingBars() {
      const data = { 5: 45, 4: 35, 3: 15, 2: 3, 1: 2 };
      document.getElementById('survey-avg-num').textContent = '4.2';
      document.getElementById('survey-avg-stars').textContent = '‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ';
      document.getElementById('survey-rating-responses').textContent = '127';
      Object.entries(data).forEach(([r, pct]) => {
        const bar = document.getElementById(`survey-bar-${r}`);
        const pctEl = document.getElementById(`survey-pct-${r}`);
        if (bar) bar.style.width = `${pct}%`;
        if (pctEl) pctEl.textContent = `${pct}%`;
      });
    }

    function animateDonutChart() {
      document.getElementById('survey-yes-pct').textContent = '78%';
      document.getElementById('survey-no-pct').textContent = '22%';
      document.getElementById('survey-recommend-responses').textContent = '127';
      const yesCircle = document.getElementById('survey-donut-yes');
      const noCircle = document.getElementById('survey-donut-no');
      if (yesCircle) yesCircle.style.strokeDasharray = '68.64 88';
      if (noCircle) { noCircle.style.strokeDasharray = '19.36 88'; noCircle.style.strokeDashoffset = '-68.64'; }
    }

    function stopSurveyAnimation() {
      surveyRunning = false;
      surveyTimeouts.forEach(t => clearTimeout(t));
      surveyTimeouts = [];
    }

    function resetSurveyAnimation() {
      stopSurveyAnimation();
      window['survey-formSetProgress'] && window['survey-formSetProgress'](0);
      window['showBar_survey-q1'] && window['showBar_survey-q1']();
      window['hideBar_survey-q2'] && window['hideBar_survey-q2']();
      window['hideBar_survey-q3'] && window['hideBar_survey-q3']();
      window['resetStars_survey-stars'] && window['resetStars_survey-stars']();
      resetLikert();
      window['resetOption_survey-recommend'] && window['resetOption_survey-recommend']();
      hideElement('survey-result-rating');
      hideElement('survey-result-recommend');
      document.getElementById('survey-avg-num').textContent = '0.0';
      document.getElementById('survey-avg-stars').textContent = '‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ';
      document.getElementById('survey-rating-responses').textContent = '0';
      [1,2,3,4,5].forEach(r => {
        const bar = document.getElementById(`survey-bar-${r}`);
        const pctEl = document.getElementById(`survey-pct-${r}`);
        if (bar) bar.style.width = '0%';
        if (pctEl) pctEl.textContent = '0%';
      });
      document.getElementById('survey-yes-pct').textContent = '0%';
      document.getElementById('survey-no-pct').textContent = '0%';
      document.getElementById('survey-recommend-responses').textContent = '0';
      const yesCircle = document.getElementById('survey-donut-yes');
      const noCircle = document.getElementById('survey-donut-no');
      if (yesCircle) yesCircle.style.strokeDasharray = '0 88';
      if (noCircle) { noCircle.style.strokeDasharray = '0 88'; noCircle.style.strokeDashoffset = '0'; }
      window['survey-demoFocusPanel'] && window['survey-demoFocusPanel']('left');
    }

    // ========== QUIZ ANIMATION ==========
    function runQuizAnimation() {
      if (quizRunning) return;
      quizRunning = true;

      const timeline = [
        // Q1: Select answer
        { delay: 800, action: () => selectQuizOption('quiz-q1-a') },
        { delay: 1500, action: () => {
          document.getElementById('quiz-progress').style.width = '33%';
          document.getElementById('quiz-q1').classList.add('hidden');
          document.getElementById('quiz-q2').classList.remove('hidden');
        }},
        // Q2: Select answer
        { delay: 2500, action: () => selectQuizOption('quiz-q2-b') },
        { delay: 3200, action: () => {
          document.getElementById('quiz-progress').style.width = '66%';
          document.getElementById('quiz-q2').classList.add('hidden');
          document.getElementById('quiz-q3').classList.remove('hidden');
        }},
        // Q3: Select answer
        { delay: 4200, action: () => selectQuizOption('quiz-q3-b') },
        { delay: 4900, action: () => {
          document.getElementById('quiz-progress').style.width = '100%';
        }},
        // Slide in results container
        { delay: 5500, action: () => {
          const resultsContainer = document.getElementById('quiz-results-container');
          if (resultsContainer) {
            resultsContainer.classList.remove('translate-y-full');
            resultsContainer.classList.add('translate-y-0');
          }
        }},
        // Show score with scale animation
        { delay: 6000, action: () => {
          const scoreDisplay = document.getElementById('quiz-score-display');
          if (scoreDisplay) {
            scoreDisplay.classList.remove('opacity-0', 'scale-90');
            scoreDisplay.classList.add('opacity-100', 'scale-100');
          }
        }},
        // Show answer breakdown items one by one
        { delay: 6500, action: () => {
          const answer1 = document.getElementById('quiz-answer-1');
          if (answer1) {
            answer1.classList.remove('opacity-0', '-translate-x-4');
            answer1.classList.add('opacity-100', 'translate-x-0');
          }
        }},
        { delay: 6800, action: () => {
          const answer2 = document.getElementById('quiz-answer-2');
          if (answer2) {
            answer2.classList.remove('opacity-0', '-translate-x-4');
            answer2.classList.add('opacity-100', 'translate-x-0');
          }
        }},
        { delay: 7100, action: () => {
          const answer3 = document.getElementById('quiz-answer-3');
          if (answer3) {
            answer3.classList.remove('opacity-0', '-translate-x-4');
            answer3.classList.add('opacity-100', 'translate-x-0');
          }
        }},
        // Show recommendation
        { delay: 7600, action: () => {
          const rec = document.getElementById('quiz-recommendation');
          if (rec) {
            rec.classList.remove('opacity-0', 'translate-y-4');
            rec.classList.add('opacity-100', 'translate-y-0');
          }
        }},
        // Next tab
        { delay: 11000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        quizTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function stopQuizAnimation() {
      quizRunning = false;
      quizTimeouts.forEach(t => clearTimeout(t));
      quizTimeouts = [];
    }

    function resetQuizAnimation() {
      stopQuizAnimation();
      document.getElementById('quiz-progress').style.width = '0%';
      document.getElementById('quiz-q1').classList.remove('hidden');
      document.getElementById('quiz-q2').classList.add('hidden');
      document.getElementById('quiz-q3').classList.add('hidden');
      ['quiz-q1-a','quiz-q1-b','quiz-q1-c','quiz-q2-a','quiz-q2-b','quiz-q2-c','quiz-q3-a','quiz-q3-b','quiz-q3-c'].forEach(resetQuizOption);

      // Reset results container
      const resultsContainer = document.getElementById('quiz-results-container');
      if (resultsContainer) {
        resultsContainer.classList.add('translate-y-full');
        resultsContainer.classList.remove('translate-y-0');
      }

      // Reset score display
      const scoreDisplay = document.getElementById('quiz-score-display');
      if (scoreDisplay) {
        scoreDisplay.classList.add('opacity-0', 'scale-90');
        scoreDisplay.classList.remove('opacity-100', 'scale-100');
      }

      // Reset answer items
      ['quiz-answer-1', 'quiz-answer-2', 'quiz-answer-3'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.classList.add('opacity-0', '-translate-x-4');
          el.classList.remove('opacity-100', 'translate-x-0');
        }
      });

      // Reset recommendation
      const rec = document.getElementById('quiz-recommendation');
      if (rec) {
        rec.classList.add('opacity-0', 'translate-y-4');
        rec.classList.remove('opacity-100', 'translate-y-0');
      }
    }

    // ========== CALCULATOR ANIMATION ==========
    // Auto-scroll calculator messages
    function calcScrollToBottom() {
      const container = document.getElementById('calc-messages');
      if (container) {
        container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
      }
    }

    function runCalcAnimation() {
      if (calcRunning) return;
      calcRunning = true;

      const timeline = [
        // Fill in form fields
        { delay: 600, action: () => {
          document.getElementById('calc-service').innerHTML = 'Professional';
          document.getElementById('calc-progress').style.width = '33%';
          updateCalcQuote(99, 0, 0);
        }},
        { delay: 1400, action: () => {
          document.getElementById('calc-team').innerHTML = '10-25 people';
          document.getElementById('calc-progress').style.width = '66%';
          updateCalcQuote(99, 100, 0);
        }},
        { delay: 2200, action: () => {
          document.getElementById('calc-duration').innerHTML = 'Annual';
          document.getElementById('calc-progress').style.width = '100%';
          updateCalcQuote(99, 100, 20);
          document.getElementById('calc-submit-btn').classList.remove('opacity-50');
        }},
        // Submit and transition
        { delay: 3000, action: () => {
          document.getElementById('calc-submit-btn').classList.add('bg-yellow-300');
        }},
        { delay: 3500, action: () => window['calc-demoFocusPanel'] && window['calc-demoFocusPanel']('right') },

        // Show ticket
        { delay: 4000, action: () => {
          const ticket = document.getElementById('calc-ticket-new');
          if (ticket) { ticket.classList.remove('opacity-0'); ticket.classList.add('opacity-100'); }
          const badge = document.getElementById('calc-new-badge');
          if (badge) badge.classList.remove('hidden');
        }},

        // Quote request appears
        { delay: 4500, action: () => { showElement('calc-msg-1'); calcScrollToBottom(); }},

        // Hide "New" badge
        { delay: 5200, action: () => {
          const badge = document.getElementById('calc-new-badge');
          if (badge) badge.classList.add('hidden');
        }},

        // Team sends payment form
        { delay: 5800, action: () => { showElement('calc-msg-2'); calcScrollToBottom(); }},

        // Customer responds
        { delay: 7500, action: () => { showElement('calc-msg-3'); calcScrollToBottom(); }},

        // Payment received
        { delay: 9000, action: () => { showElement('calc-msg-4'); calcScrollToBottom(); }},

        // Next tab
        { delay: 13000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        calcTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function updateCalcQuote(base, seats, discount) {
      const total = base + seats - discount;
      document.getElementById('calc-base').textContent = `$${base}`;
      document.getElementById('calc-seats').textContent = `$${seats}`;
      document.getElementById('calc-discount').textContent = `-$${discount}`;
      document.getElementById('calc-total').textContent = `$${total}`;
    }

    function stopCalcAnimation() {
      calcRunning = false;
      calcTimeouts.forEach(t => clearTimeout(t));
      calcTimeouts = [];
    }

    function resetCalcAnimation() {
      stopCalcAnimation();
      document.getElementById('calc-progress').style.width = '0%';
      document.getElementById('calc-service').innerHTML = '<span class="text-white/40">Select...</span>';
      document.getElementById('calc-team').innerHTML = '<span class="text-white/40">Select...</span>';
      document.getElementById('calc-duration').innerHTML = '<span class="text-white/40">Select...</span>';
      updateCalcQuote(0, 0, 0);
      document.getElementById('calc-submit-btn').classList.add('opacity-50');
      document.getElementById('calc-submit-btn').classList.remove('bg-yellow-300');

      // Reset ticket
      const ticket = document.getElementById('calc-ticket-new');
      if (ticket) { ticket.classList.add('opacity-0'); ticket.classList.remove('opacity-100'); }
      const badge = document.getElementById('calc-new-badge');
      if (badge) badge.classList.remove('hidden');

      // Reset messages (add hidden class back)
      ['calc-msg-1', 'calc-msg-2', 'calc-msg-3', 'calc-msg-4'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.classList.add('hidden', 'opacity-0', 'translate-y-4');
          el.classList.remove('opacity-100', 'translate-y-0');
        }
      });

      // Reset scroll position
      const messagesContainer = document.getElementById('calc-messages');
      if (messagesContainer) messagesContainer.scrollTop = 0;

      window['calc-demoFocusPanel'] && window['calc-demoFocusPanel']('left');
    }

    // ========== FORMS ANIMATION ==========
    // Auto-scroll messages container
    function formsScrollToBottom() {
      const container = document.getElementById('forms-messages');
      if (container) {
        container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
      }
    }

    // Typewriter for forms editor
    function formsTypeText(text, speed = 40) {
      const el = document.getElementById('forms-typed-text');
      if (!el) return;
      let i = 0;
      el.textContent = '';
      function type() {
        if (i < text.length && formsRunning) {
          el.textContent += text.charAt(i);
          i++;
          formsTimeouts.push(setTimeout(type, speed));
        }
      }
      type();
    }

    function runFormsAnimation() {
      if (formsRunning) return;
      formsRunning = true;

      const timeline = [
        // Phase 1: Type name fields
        { delay: 500, action: () => window['typeText_forms-fname'] && window['typeText_forms-fname']('Rachel', 80) },
        { delay: 1200, action: () => window['typeText_forms-lname'] && window['typeText_forms-lname']('Kim', 80) },
        { delay: 1800, action: () => window['typeText_forms-email'] && window['typeText_forms-email']('rachel@email.com', 50) },

        // Phase 2: Progress to position/experience
        { delay: 2800, action: () => {
          window['forms-formSetProgress'] && window['forms-formSetProgress'](33);
          window['hideBar_forms-q1'] && window['hideBar_forms-q1']();
          window['showBar_forms-q2'] && window['showBar_forms-q2']();
        }},

        // Select position and experience
        { delay: 3200, action: () => window['selectOption_forms-position'] && window['selectOption_forms-position']('a') },
        { delay: 3800, action: () => window['selectOption_forms-experience'] && window['selectOption_forms-experience']('b') },

        // Phase 3: Progress to CV upload
        { delay: 4400, action: () => {
          window['forms-formSetProgress'] && window['forms-formSetProgress'](66);
          window['hideBar_forms-q2'] && window['hideBar_forms-q2']();
          window['showBar_forms-q3'] && window['showBar_forms-q3']();
        }},

        // File upload animation
        { delay: 4800, action: () => {
          const upload = document.getElementById('forms-upload');
          if (upload) upload.classList.add('border-white', 'bg-white/10');
        }},
        { delay: 5200, action: () => {
          document.getElementById('forms-upload-empty').classList.add('hidden');
          document.getElementById('forms-upload-file').classList.remove('hidden');
        }},
        { delay: 5600, action: () => window['forms-formSetProgress'] && window['forms-formSetProgress'](100) },

        // Phase 4: Transition to inbox
        { delay: 6200, action: () => window['forms-demoFocusPanel'] && window['forms-demoFocusPanel']('right') },

        // Phase 5: Show ticket and form submission
        { delay: 6700, action: () => {
          const ticket = document.getElementById('forms-ticket-new');
          if (ticket) { ticket.classList.remove('opacity-0'); ticket.classList.add('opacity-100'); }
        }},
        { delay: 7200, action: () => { showElement('forms-msg-1'); formsScrollToBottom(); } },

        // Automation adds labels
        { delay: 7800, action: () => {
          const auto = document.getElementById('forms-automation');
          if (auto) { auto.classList.remove('hidden', 'opacity-0'); auto.classList.add('opacity-100'); }
          formsScrollToBottom();
        }},

        // Jane starts viewing
        { delay: 8500, action: () => {
          const indicator = document.getElementById('forms-viewing-indicator');
          const badge = document.getElementById('forms-new-badge');
          const collab = document.getElementById('forms-collab-indicator');
          if (indicator) { indicator.classList.remove('opacity-0'); indicator.classList.add('opacity-100'); }
          if (badge) badge.classList.add('hidden');
          if (collab) { collab.classList.remove('opacity-0'); collab.classList.add('opacity-100'); }
        }},

        // Internal thread appears (Jane asks Tom)
        { delay: 9200, action: () => { showElement('forms-internal-thread'); formsScrollToBottom(); } },

        // Tom joins
        { delay: 10000, action: () => {
          const collabTom = document.getElementById('forms-collab-tom');
          if (collabTom) { collabTom.classList.remove('opacity-0'); collabTom.classList.add('opacity-100'); }
        }},

        // Tom replies in internal thread
        { delay: 10600, action: () => {
          const reply = document.getElementById('forms-internal-tom-reply');
          if (reply) { reply.classList.remove('opacity-0'); reply.classList.add('opacity-100'); }
          formsScrollToBottom();
        }},

        // Editor activates
        { delay: 11200, action: () => {
          const placeholder = document.getElementById('forms-editor-placeholder');
          const content = document.getElementById('forms-editor-content');
          const toolbar = document.getElementById('forms-editor-toolbar');
          const cursor = document.getElementById('forms-cursor');
          if (placeholder) placeholder.classList.add('hidden');
          if (content) content.classList.remove('hidden');
          if (toolbar) { toolbar.classList.remove('opacity-0'); toolbar.classList.add('opacity-100'); }
          if (cursor) { cursor.classList.remove('opacity-0'); cursor.classList.add('opacity-100'); }
        }},

        // Tom types reply
        { delay: 11500, action: () => formsTypeText('Hi Rachel! Thanks for applying. Your experience looks great - would you be free for a call Thursday?', 25) },

        // Hide cursor when done typing
        { delay: 14500, action: () => {
          const cursor = document.getElementById('forms-cursor');
          if (cursor) { cursor.classList.add('opacity-0'); cursor.classList.remove('opacity-100'); }
        }},

        // Send button activates
        { delay: 15000, action: () => {
          const btn = document.getElementById('forms-send-btn');
          if (btn) {
            btn.classList.remove('bg-gray-200', 'text-gray-400');
            btn.classList.add('bg-gray-900', 'text-white');
          }
        }},

        // Send message
        { delay: 15600, action: () => {
          // Clear editor
          const content = document.getElementById('forms-editor-content');
          const placeholder = document.getElementById('forms-editor-placeholder');
          const toolbar = document.getElementById('forms-editor-toolbar');
          const btn = document.getElementById('forms-send-btn');
          const typedText = document.getElementById('forms-typed-text');
          const collab = document.getElementById('forms-collab-indicator');

          if (typedText) typedText.textContent = '';
          if (content) content.classList.add('hidden');
          if (placeholder) placeholder.classList.remove('hidden');
          if (toolbar) { toolbar.classList.add('opacity-0'); toolbar.classList.remove('opacity-100'); }
          if (btn) {
            btn.classList.add('bg-gray-200', 'text-gray-400');
            btn.classList.remove('bg-gray-900', 'text-white');
          }
          if (collab) { collab.classList.add('opacity-0'); collab.classList.remove('opacity-100'); }

          // Show sent message
          showElement('forms-sent-reply');
          formsScrollToBottom();
        }},

        // Next tab
        { delay: 19000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        formsTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function stopFormsAnimation() {
      formsRunning = false;
      formsTimeouts.forEach(t => clearTimeout(t));
      formsTimeouts = [];
    }

    function resetFormsAnimation() {
      stopFormsAnimation();

      // Reset progress bar
      window['forms-formSetProgress'] && window['forms-formSetProgress'](0);

      // Reset yellow bars
      window['showBar_forms-q1'] && window['showBar_forms-q1']();
      window['hideBar_forms-q2'] && window['hideBar_forms-q2']();
      window['hideBar_forms-q3'] && window['hideBar_forms-q3']();

      // Reset text fields
      window['resetText_forms-fname'] && window['resetText_forms-fname']();
      window['resetText_forms-lname'] && window['resetText_forms-lname']();
      window['resetText_forms-email'] && window['resetText_forms-email']();

      // Reset multiple choice
      window['resetOption_forms-position'] && window['resetOption_forms-position']();
      window['resetOption_forms-experience'] && window['resetOption_forms-experience']();

      // Reset file upload
      const upload = document.getElementById('forms-upload');
      if (upload) upload.classList.remove('border-white', 'bg-white/10');
      document.getElementById('forms-upload-empty')?.classList.remove('hidden');
      document.getElementById('forms-upload-file')?.classList.add('hidden');

      // Reset inbox ticket
      const ticket = document.getElementById('forms-ticket-new');
      if (ticket) { ticket.classList.add('opacity-0'); ticket.classList.remove('opacity-100'); }

      // Reset viewing indicators
      const viewingIndicator = document.getElementById('forms-viewing-indicator');
      const badge = document.getElementById('forms-new-badge');
      const collab = document.getElementById('forms-collab-indicator');
      const collabTom = document.getElementById('forms-collab-tom');
      if (viewingIndicator) { viewingIndicator.classList.add('opacity-0'); viewingIndicator.classList.remove('opacity-100'); }
      if (badge) badge.classList.remove('hidden');
      if (collab) { collab.classList.add('opacity-0'); collab.classList.remove('opacity-100'); }
      if (collabTom) { collabTom.classList.add('opacity-0'); collabTom.classList.remove('opacity-100'); }

      // Reset messages (add hidden class back)
      ['forms-msg-1', 'forms-internal-thread', 'forms-sent-reply', 'forms-automation'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.classList.add('hidden', 'opacity-0', 'translate-y-4');
          el.classList.remove('opacity-100', 'translate-y-0');
        }
      });

      // Reset internal thread tom reply
      const tomReply = document.getElementById('forms-internal-tom-reply');
      if (tomReply) { tomReply.classList.add('opacity-0'); tomReply.classList.remove('opacity-100'); }

      // Reset editor
      const placeholder = document.getElementById('forms-editor-placeholder');
      const content = document.getElementById('forms-editor-content');
      const toolbar = document.getElementById('forms-editor-toolbar');
      const cursor = document.getElementById('forms-cursor');
      const btn = document.getElementById('forms-send-btn');
      const typedText = document.getElementById('forms-typed-text');
      if (placeholder) placeholder.classList.remove('hidden');
      if (content) content.classList.add('hidden');
      if (toolbar) { toolbar.classList.add('opacity-0'); toolbar.classList.remove('opacity-100'); }
      if (cursor) { cursor.classList.add('opacity-0'); cursor.classList.remove('opacity-100'); }
      if (typedText) typedText.textContent = '';
      if (btn) {
        btn.classList.add('bg-gray-200', 'text-gray-400');
        btn.classList.remove('bg-gray-900', 'text-white');
      }

      // Reset scroll position
      const messagesContainer = document.getElementById('forms-messages');
      if (messagesContainer) messagesContainer.scrollTop = 0;

      // Reset focus to form
      window['forms-demoFocusPanel'] && window['forms-demoFocusPanel']('left');
    }
  });
</script>
