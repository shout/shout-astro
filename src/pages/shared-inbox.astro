---
import AstroshipLayout from "../layouts/AstroshipLayout.astro";
import Container from "../components/container.astro";
import Button from "../components/ui/button.astro";
import { Icon } from "astro-icon/components";
import CustomerLogos from "../components/customer-logos.astro";
import Features from "../components/features.astro";

// Hero demo components
import HeroDemoContainer from "../components/hero-demo/HeroDemoContainer.astro";
import FormCard from "../components/hero-demo/FormCard.astro";
import FormQuestion from "../components/hero-demo/FormQuestion.astro";
import TextInput from "../components/hero-demo/TextInput.astro";
import StarRating from "../components/hero-demo/StarRating.astro";
import MultipleChoice from "../components/hero-demo/MultipleChoice.astro";
import ResultPanel from "../components/hero-demo/ResultPanel.astro";

const tabs = [
  {
    id: "inbox",
    title: "Shared Inbox",
    icon: "bx:envelope-open",
    description: "All your team's messages in one unified inbox"
  },
  {
    id: "tickets",
    title: "Forms to Conversations",
    icon: "bx:conversation",
    description: "Every form submission becomes a conversation you can reply to"
  },
  {
    id: "contacts",
    title: "Contact Hub",
    icon: "bx:user-circle",
    description: "Complete customer profiles with full conversation history"
  },
  {
    id: "automation",
    title: "Automation",
    icon: "bx:bot",
    description: "Auto-assign, tag, and route conversations with smart rules"
  },
];
---

<AstroshipLayout
  title="Team Inbox - Shared Inbox for Form Submissions & Email | Shout.com"
  description="A shared inbox that brings form submissions, surveys, and emails together. Collaborate with your team on customer conversations. Start your 14-day Free Trial."
>
  <!-- Hero Section with Tabbed Video -->
  <section class="py-16">
    <Container>
      <div class="text-center max-w-4xl mx-auto mb-8">
        <h1 class="text-5xl lg:text-6xl font-bold lg:tracking-tight mb-6">
          One inbox for <span class="text-primary">everything</span>
        </h1>
        <p class="text-xl text-gray-600">
          Form submissions, emails, and support tickets all in one place. Your team works together, nothing falls through the cracks.
        </p>
      </div>

      <!-- Tabs + CTA -->
      <div class="flex flex-col md:flex-row justify-center items-center gap-3 mb-8">
        <div class="flex w-full md:w-auto md:inline-flex bg-gray-100 md:rounded-full p-1 gap-0 md:gap-1">
          {tabs.map((tab, index) => (
            <button
              data-tab={tab.id}
              class:list={[
                "tab-button flex-1 md:flex-none px-3 md:px-6 py-3 md:rounded-full text-xs md:text-sm font-medium transition-all flex flex-col md:flex-row items-center justify-center gap-1 md:gap-2",
                index === 0 ? "bg-white shadow-sm text-gray-900" : "text-gray-600 hover:text-gray-900"
              ]}
            >
              <Icon name={tab.icon} class="w-5 h-5" />
              <span>{tab.title}</span>
            </button>
          ))}
        </div>
        <a href="https://identity.shout.com/Account/Register" class="hidden lg:inline-flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-all shadow-sm">
          Start Free Trial
          <Icon name="bx:right-arrow-alt" class="w-5 h-5" />
        </a>
      </div>

      <!-- Video/Demo Container -->
      <div class="max-w-5xl mx-auto">
        <div class="relative">
          <!-- Shared Inbox Hero Demo -->
          <div data-video-panel="inbox" class="video-panel block">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
              <!-- Window chrome -->
              <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200">
                <div class="flex gap-1.5">
                  <div class="w-3 h-3 rounded-full bg-red-400"></div>
                  <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                  <div class="w-3 h-3 rounded-full bg-green-400"></div>
                </div>
                <span class="text-sm text-gray-500 ml-2">Team Inbox</span>
                <div class="ml-auto flex items-center gap-2">
                  <div id="inbox-team-avatars" class="flex -space-x-2">
                    <div id="inbox-tom-avatar" class="w-6 h-6 rounded-full bg-purple-500 border-2 border-white flex items-center justify-center text-white text-[10px] font-medium opacity-50 transition-all duration-500">T</div>
                    <div id="inbox-kate-avatar" class="w-6 h-6 rounded-full bg-pink-500 border-2 border-white flex items-center justify-center text-white text-[10px] font-medium opacity-0 transition-all duration-500">K</div>
                  </div>
                  <span class="text-xs text-gray-400">online</span>
                </div>
              </div>

              <div class="flex h-[400px]">
                <!-- Ticket list sidebar -->
                <div class="w-[180px] border-r border-gray-200 bg-gray-50/50 overflow-hidden flex-shrink-0">
                  <!-- New ticket -->
                  <div id="inbox-ticket-1" class="px-3 py-2.5 bg-primary/10 border-l-2 border-primary cursor-pointer transition-all duration-500">
                    <div class="flex items-center justify-between mb-1">
                      <div class="flex items-center gap-2">
                        <div class="w-5 h-5 rounded-full bg-rose-500 flex items-center justify-center text-white text-[10px] font-medium">E</div>
                        <span class="text-xs font-medium text-gray-800">Emma Wilson</span>
                      </div>
                      <span class="text-[10px] text-gray-400">2m</span>
                    </div>
                    <p class="text-[10px] text-gray-600 truncate">Pricing for enterprise</p>
                    <div class="flex items-center gap-1 mt-1">
                      <span id="inbox-new-badge" class="text-[8px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded transition-all duration-300">New</span>
                      <div id="inbox-viewing-indicator" class="flex items-center gap-1 opacity-0 transition-all duration-300">
                        <div class="w-3 h-3 rounded-full bg-pink-500 flex items-center justify-center text-white text-[6px]">K</div>
                        <div id="inbox-viewing-tom" class="w-3 h-3 rounded-full bg-purple-500 flex items-center justify-center text-white text-[6px] -ml-1.5 border border-white opacity-0 transition-all duration-300">T</div>
                      </div>
                    </div>
                  </div>

                  <!-- Existing tickets -->
                  <div class="px-3 py-2.5 border-b border-gray-100 hover:bg-gray-50 cursor-pointer">
                    <div class="flex items-center justify-between mb-1">
                      <div class="flex items-center gap-2">
                        <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium">M</div>
                        <span class="text-xs font-medium text-gray-700">Mike Chen</span>
                      </div>
                      <span class="text-[10px] text-gray-400">1h</span>
                    </div>
                    <p class="text-[10px] text-gray-500 truncate">Re: Invoice question</p>
                  </div>

                  <div class="px-3 py-2.5 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                    <div class="flex items-center justify-between mb-1">
                      <div class="flex items-center gap-2">
                        <div class="w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-medium">S</div>
                        <span class="text-xs font-medium text-gray-700">Sarah Lee</span>
                      </div>
                      <span class="text-[10px] text-gray-400">3h</span>
                    </div>
                    <p class="text-[10px] text-gray-400 truncate">Feature request</p>
                  </div>
                </div>

                <!-- Conversation detail -->
                <div class="flex-1 flex flex-col min-w-0">
                  <!-- Conversation header -->
                  <div class="px-3 py-2 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                    <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-rose-500 flex items-center justify-center text-white text-[10px] font-medium">E</div>
                      <div>
                        <p class="text-xs font-medium text-gray-800">Emma Wilson</p>
                        <p class="text-[9px] text-gray-400">emma@company.com</p>
                      </div>
                    </div>
                    <div id="inbox-collab-indicator" class="flex items-center gap-1 opacity-0 transition-all duration-300">
                      <div class="flex -space-x-1">
                        <div class="w-4 h-4 rounded-full bg-pink-500 border border-white flex items-center justify-center text-white text-[7px]">K</div>
                        <div id="inbox-collab-tom" class="w-4 h-4 rounded-full bg-purple-500 border border-white flex items-center justify-center text-white text-[7px] opacity-0 transition-all duration-300">T</div>
                      </div>
                      <span class="text-[9px] text-gray-400">editing</span>
                    </div>
                  </div>

                  <!-- Messages area -->
                  <div id="inbox-messages" class="flex-1 p-3 space-y-2 overflow-y-auto">
                    <!-- Emma's message -->
                    <div id="inbox-msg-1" class="flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                      <div class="w-5 h-5 rounded-full bg-rose-500 flex items-center justify-center text-white text-[9px] font-medium flex-shrink-0 mt-0.5">E</div>
                      <div class="max-w-[90%]">
                        <div class="flex items-center gap-1.5 mb-1">
                          <Icon name="bx:envelope" class="w-3 h-3 text-gray-400" />
                          <span class="text-[8px] text-gray-400">via Email</span>
                        </div>
                        <div class="bg-gray-100 rounded-xl rounded-tl-sm px-2.5 py-2">
                          <p class="text-[11px] text-gray-700 leading-relaxed">Hi there! I'm interested in upgrading to your enterprise plan. Can you tell me about volume pricing for 500+ users?</p>
                        </div>
                      </div>
                    </div>

                    <!-- Internal notes thread (grouped in single bubble) -->
                    <div id="inbox-internal-thread" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                      <div class="max-w-[85%]">
                        <div class="text-right mb-1">
                          <span class="text-[8px] text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded">Internal thread</span>
                        </div>
                        <div class="bg-white border border-gray-200 rounded-xl rounded-tr-sm overflow-hidden">
                          <!-- Kate's message -->
                          <div class="px-2.5 py-2 border-b border-gray-100">
                            <div class="flex items-start gap-1.5">
                              <div class="w-4 h-4 rounded-full bg-pink-500 flex items-center justify-center text-white text-[7px] font-medium flex-shrink-0 mt-0.5">K</div>
                              <p class="text-[11px] text-gray-600"><span class="inline-flex items-center gap-0.5 px-1 py-0.5 bg-purple-100 text-purple-700 rounded text-[9px] font-medium"><span class="w-2 h-2 rounded-full bg-purple-500 flex items-center justify-center text-white text-[5px]">T</span>Tom</span> can you help with enterprise pricing? 500+ seats</p>
                            </div>
                          </div>
                          <!-- Tom's reply -->
                          <div id="inbox-internal-tom-reply" class="px-2.5 py-2 opacity-0 transition-all duration-300">
                            <div class="flex items-start gap-1.5">
                              <div class="w-4 h-4 rounded-full bg-purple-500 flex items-center justify-center text-white text-[7px] font-medium flex-shrink-0 mt-0.5">T</div>
                              <p class="text-[11px] text-gray-600">On it! I'll add the details üëç</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Sent reply (appears at end) -->
                    <div id="inbox-sent-reply" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                      <div class="bg-gray-900 text-white rounded-xl rounded-tr-sm px-2.5 py-2 max-w-[85%]">
                        <p class="text-[11px] leading-relaxed">Hi Emma! Thanks for reaching out. We offer custom pricing for 500+ users. Would you have time for a quick call?</p>
                        <p class="text-[9px] text-gray-400 mt-1">Just now</p>
                      </div>
                      <div class="flex -space-x-1 flex-shrink-0 mt-0.5">
                        <div class="w-4 h-4 rounded-full bg-pink-500 border border-white flex items-center justify-center text-white text-[7px]">K</div>
                        <div class="w-4 h-4 rounded-full bg-purple-500 border border-white flex items-center justify-center text-white text-[7px]">T</div>
                      </div>
                    </div>
                  </div>

                  <!-- Rich text editor (TipTap-style) -->
                  <div id="inbox-editor" class="border-t border-gray-100 flex-shrink-0">
                    <!-- Editor toolbar -->
                    <div id="inbox-editor-toolbar" class="flex items-center gap-1 px-2 py-1.5 border-b border-gray-50 opacity-0 transition-all duration-300">
                      <button class="p-1 rounded hover:bg-gray-100 text-gray-400">
                        <Icon name="bx:bold" class="w-3.5 h-3.5" />
                      </button>
                      <button class="p-1 rounded hover:bg-gray-100 text-gray-400">
                        <Icon name="bx:italic" class="w-3.5 h-3.5" />
                      </button>
                      <button class="p-1 rounded hover:bg-gray-100 text-gray-400">
                        <Icon name="bx:link" class="w-3.5 h-3.5" />
                      </button>
                      <div class="flex-1"></div>
                      <button id="inbox-internal-btn" class="flex items-center gap-1 px-2 py-0.5 rounded text-[9px] text-gray-500 hover:bg-gray-100 transition-colors">
                        <Icon name="bx:comment-detail" class="w-3 h-3" />
                        <span>Internal</span>
                      </button>
                    </div>

                    <!-- Editor content with cursors -->
                    <div class="relative px-3 py-2 min-h-[60px]">
                      <!-- Placeholder -->
                      <div id="inbox-editor-placeholder" class="text-[11px] text-gray-400">Reply to Emma...</div>

                      <!-- Active editor content -->
                      <div id="inbox-editor-content" class="text-[11px] text-gray-800 leading-relaxed hidden">
                        <!-- Kate types start and end, leaving gap for Tom -->
                        <span id="inbox-typed-kate1"></span>
                        <!-- Tom fills in the middle -->
                        <span id="inbox-typed-tom"></span><span id="inbox-cursor-tom" class="relative opacity-0 transition-all duration-300"><span class="absolute -top-4 left-0 px-1 py-0.5 bg-purple-500 text-white text-[8px] rounded whitespace-nowrap">Tom</span><span class="inline-block w-0.5 h-4 bg-purple-500 animate-pulse"></span></span>
                        <!-- Kate's second part (typed before Tom fills gap) -->
                        <span id="inbox-typed-kate2"></span>
                      </div>

                      <!-- Send button -->
                      <button id="inbox-send-btn" class="absolute right-2 bottom-2 bg-gray-200 text-gray-400 w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300">
                        <Icon name="bx:send" class="w-3 h-3" />
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Forms to Conversations Hero Demo -->
          <div data-video-panel="tickets" class="video-panel hidden">
            <HeroDemoContainer id="f2c-demo" rightWidth="md:w-[60%]">
              <FormCard slot="left" title="Contact Us" id="f2c-form" bgColor="bg-[#2A98C6]">
                <FormQuestion number={1} question="Your details" id="f2c-q1" barVisible={true}>
                  <div class="grid grid-cols-2 gap-2 mb-2">
                    <TextInput id="f2c-fname" label="First Name" />
                    <TextInput id="f2c-lname" label="Last Name" />
                  </div>
                  <TextInput id="f2c-email" label="Email Address" />
                </FormQuestion>

                <FormQuestion number={2} question="What can we help with?" id="f2c-q2">
                  <MultipleChoice id="f2c-topic" optionA="Sales inquiry" optionB="Support" />
                </FormQuestion>

                <FormQuestion number={3} question="How urgent is this?" id="f2c-q3" class="">
                  <StarRating id="f2c-urgency" />
                </FormQuestion>
              </FormCard>

              <ResultPanel slot="right" title="Team Inbox" id="f2c-inbox" windowChrome={true} avatars={[{ letter: "T", color: "bg-purple-500" }, { letter: "J", color: "bg-green-500" }]}>
                <div class="flex h-[340px]">
                  <!-- Ticket list sidebar -->
                  <div class="w-[140px] border-r border-gray-200 bg-gray-50/50 flex-shrink-0 overflow-hidden">
                    <div id="f2c-ticket-new" class="px-3 py-2 bg-primary/10 border-l-2 border-primary cursor-pointer opacity-0 transition-all duration-500">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-rose-500 flex items-center justify-center text-white text-[10px] font-medium">J</div>
                        <span class="text-xs font-medium text-gray-800 truncate">Jane Cooper</span>
                      </div>
                      <p class="text-[10px] text-gray-500 truncate">Contact Us</p>
                      <span class="inline-block mt-1 text-[8px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded">New</span>
                    </div>
                    <div class="px-3 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium">S</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Sarah Johnson</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Feedback form</p>
                    </div>
                    <div class="px-3 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-medium">M</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Mike Chen</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Product inquiry</p>
                    </div>
                    <div class="px-3 py-2 hover:bg-gray-50 cursor-pointer opacity-60">
                      <div class="flex items-center gap-2 mb-1">
                        <div class="w-5 h-5 rounded-full bg-orange-500 flex items-center justify-center text-white text-[10px] font-medium">A</div>
                        <span class="text-xs font-medium text-gray-700 truncate">Alex Rivera</span>
                      </div>
                      <p class="text-[10px] text-gray-400 truncate">Support request</p>
                    </div>
                  </div>

                  <!-- Conversation detail -->
                  <div class="flex-1 flex flex-col p-3">
                    <div class="space-y-2 flex-1 flex flex-col overflow-y-auto">
                      <div id="f2c-msg-1" class="flex gap-2 items-start opacity-0 translate-y-4 transition-all duration-500">
                        <div class="w-5 h-5 rounded-full bg-rose-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">J</div>
                        <div class="bg-gray-100 rounded-xl rounded-tl-sm px-2.5 py-1.5 max-w-[90%]">
                          <p class="text-[10px] font-medium text-gray-500 mb-1">Jane Cooper</p>
                          <div class="text-[10px] text-gray-500 mb-1.5 pb-1.5 border-b border-gray-200">
                            <p><span class="font-medium">Topic:</span> Sales inquiry</p>
                            <p><span class="font-medium">Urgency:</span> ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</p>
                          </div>
                          <p class="text-xs text-gray-700">Hi! I'd like to learn more about your enterprise plan pricing.</p>
                        </div>
                      </div>
                      <div id="f2c-msg-2" class="flex gap-2 items-start justify-end opacity-0 translate-y-4 transition-all duration-500">
                        <div class="bg-gray-900 text-white rounded-xl rounded-tr-sm px-2.5 py-1.5 max-w-[85%]">
                          <p class="text-xs">Hi Jane! Thanks for reaching out. I'd be happy to walk you through our enterprise options. Would you have time for a quick call this week?</p>
                        </div>
                        <div class="w-5 h-5 rounded-full bg-purple-500 flex items-center justify-center text-white text-[10px] font-medium flex-shrink-0 mt-0.5">T</div>
                      </div>
                    </div>
                    <div class="flex gap-2 pt-2 mt-auto border-t border-gray-100">
                      <div class="flex-1 bg-gray-50 rounded-full px-3 py-1 text-xs text-gray-400">Reply...</div>
                      <button class="bg-gray-900 text-white w-6 h-6 rounded-full flex items-center justify-center">
                        <Icon name="bx:send" class="w-3 h-3" />
                      </button>
                    </div>
                  </div>
                </div>
              </ResultPanel>
            </HeroDemoContainer>
          </div>

          <!-- Contact Hub Hero Demo -->
          <div data-video-panel="contacts" class="video-panel hidden">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
              <!-- Window chrome -->
              <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200">
                <div class="flex gap-1.5">
                  <div class="w-3 h-3 rounded-full bg-red-400"></div>
                  <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                  <div class="w-3 h-3 rounded-full bg-green-400"></div>
                </div>
                <span class="text-sm text-gray-500 ml-2">Contact Hub</span>
              </div>

              <div class="flex h-[340px]">
                <!-- Contact list sidebar -->
                <div class="w-[160px] border-r border-gray-200 bg-gray-50/50 overflow-hidden flex-shrink-0">
                  <div class="px-2 py-2 border-b border-gray-200">
                    <div class="flex items-center gap-1.5 bg-white rounded-lg px-2 py-1 border border-gray-200">
                      <Icon name="bx:search" class="w-3 h-3 text-gray-400" />
                      <span class="text-[10px] text-gray-400">Search...</span>
                    </div>
                  </div>

                  <div id="contact-emma" class="px-2 py-2 bg-primary/10 border-l-2 border-primary cursor-pointer">
                    <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-rose-500 flex items-center justify-center text-white text-[10px] font-medium">E</div>
                      <div class="flex-1 min-w-0">
                        <span class="text-[11px] font-medium text-gray-800 block truncate">Emma Wilson</span>
                        <span class="text-[9px] text-gray-400">Acme Corp</span>
                      </div>
                    </div>
                  </div>

                  <div class="px-2 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer opacity-60">
                    <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-[10px] font-medium">J</div>
                      <div class="flex-1 min-w-0">
                        <span class="text-[11px] font-medium text-gray-700 block truncate">James Lee</span>
                        <span class="text-[9px] text-gray-400">TechStart</span>
                      </div>
                    </div>
                  </div>

                  <div class="px-2 py-2 hover:bg-gray-50 cursor-pointer opacity-60">
                    <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-medium">S</div>
                      <div class="flex-1 min-w-0">
                        <span class="text-[11px] font-medium text-gray-700 block truncate">Sarah Chen</span>
                        <span class="text-[9px] text-gray-400">DataFlow</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Contact detail - Two column layout -->
                <div class="flex-1 flex flex-col overflow-hidden">
                  <!-- Contact header -->
                  <div class="px-4 py-2.5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-rose-500 flex items-center justify-center text-white text-sm font-medium">E</div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2">
                        <h3 class="text-sm font-semibold text-gray-800">Emma Wilson</h3>
                        <span id="contact-status" class="px-1.5 py-0.5 rounded text-[9px] font-medium bg-amber-100 text-amber-700 opacity-0 transition-all duration-500">Prospect</span>
                      </div>
                      <p class="text-[10px] text-gray-500">VP of Operations ¬∑ Acme Corp ¬∑ emma@acmecorp.com</p>
                    </div>
                    <button class="flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-xs font-medium rounded-lg hover:bg-gray-800 transition-colors flex-shrink-0">
                      <Icon name="bx:message-square-dots" class="w-3.5 h-3.5" />
                      <span>Start Conversation</span>
                    </button>
                  </div>

                  <!-- Two column content -->
                  <div class="flex-1 flex overflow-hidden">
                    <!-- Left column - Activity -->
                    <div class="w-1/2 p-3 border-r border-gray-100 overflow-y-auto overflow-x-hidden">
                      <p class="text-[10px] font-medium text-gray-400 uppercase tracking-wide mb-2">Recent Activity</p>
                      <div class="space-y-2.5 pr-1">
                        <div id="contact-activity-1" class="flex gap-2.5 items-start opacity-0 translate-x-4 transition-all duration-500">
                          <div class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <Icon name="bx:dollar" class="w-3.5 h-3.5 text-green-600" />
                          </div>
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-700">Payment received - <span class="font-medium">$2,400</span></p>
                            <p class="text-[10px] text-gray-400">Today, 10:23 AM</p>
                          </div>
                        </div>

                        <div id="contact-activity-2" class="flex gap-2.5 items-start opacity-0 translate-x-4 transition-all duration-500">
                          <div class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <Icon name="bx:poll" class="w-3.5 h-3.5 text-blue-600" />
                          </div>
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-700">Completed NPS Survey - Score <span class="font-medium text-green-600">9</span></p>
                            <p class="text-[10px] text-gray-400">Yesterday, 3:45 PM</p>
                          </div>
                        </div>

                        <div id="contact-activity-3" class="flex gap-2.5 items-start opacity-0 translate-x-4 transition-all duration-500">
                          <div class="w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <Icon name="bx:mouse" class="w-3.5 h-3.5 text-purple-600" />
                          </div>
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-700">Clicked email link - <span class="text-gray-500">Pricing update</span></p>
                            <p class="text-[10px] text-gray-400">Yesterday, 11:20 AM</p>
                          </div>
                        </div>

                        <div id="contact-activity-4" class="flex gap-2.5 items-start opacity-0 translate-x-4 transition-all duration-500">
                          <div class="w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <Icon name="bx:file" class="w-3.5 h-3.5 text-amber-600" />
                          </div>
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-700">Submitted Quote Request form</p>
                            <p class="text-[10px] text-gray-400">Jan 28, 2:15 PM</p>
                          </div>
                        </div>

                        <div id="contact-activity-5" class="flex gap-2.5 items-start opacity-0 translate-x-4 transition-all duration-500">
                          <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <Icon name="bx:chat" class="w-3.5 h-3.5 text-gray-600" />
                          </div>
                          <div class="flex-1 min-w-0">
                            <p class="text-xs text-gray-700">First conversation started</p>
                            <p class="text-[10px] text-gray-400">Jan 27, 9:00 AM</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Right column - Metrics -->
                    <div class="w-1/2 p-3 overflow-y-auto overflow-x-hidden bg-gray-50/30">
                      <p class="text-[10px] font-medium text-gray-400 uppercase tracking-wide mb-2">Overview</p>
                      <div class="grid grid-cols-2 gap-2">
                        <!-- NPS Score with gauge -->
                        <div id="contact-nps-card" class="bg-white rounded-lg p-2.5 border border-gray-100 opacity-0 translate-y-4 transition-all duration-500">
                          <div class="flex items-center justify-between mb-1.5">
                            <span class="text-[9px] font-medium text-gray-500 uppercase">NPS</span>
                            <span class="text-lg font-bold text-green-600">9</span>
                          </div>
                          <!-- NPS gauge -->
                          <div class="relative h-2 bg-gradient-to-r from-red-400 via-yellow-400 to-green-400 rounded-full">
                            <div id="contact-nps-marker" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-green-500 rounded-full shadow-md transition-all duration-700" style="left: 0%"></div>
                          </div>
                        </div>

                        <!-- Forms Submitted -->
                        <div id="contact-stat-1" class="bg-white rounded-lg p-2.5 border border-gray-100 opacity-0 translate-y-4 transition-all duration-500">
                          <p class="text-[9px] text-gray-500 uppercase mb-1">Forms</p>
                          <p class="text-lg font-bold text-gray-800">4</p>
                        </div>

                        <!-- Click Rate -->
                        <div id="contact-stat-2" class="bg-white rounded-lg p-2.5 border border-gray-100 opacity-0 translate-y-4 transition-all duration-500">
                          <p class="text-[9px] text-gray-500 uppercase mb-1">Click Rate</p>
                          <p class="text-lg font-bold text-primary">68%</p>
                        </div>

                        <!-- Value -->
                        <div id="contact-value-card" class="bg-green-50 rounded-lg p-2.5 border border-green-200 opacity-0 translate-y-4 transition-all duration-500">
                          <p class="text-[9px] text-green-600 font-medium uppercase mb-1">Value</p>
                          <p class="text-lg font-bold text-green-700">$12,400</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Automation Hero Demo -->
          <div data-video-panel="automation" class="video-panel hidden">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
              <!-- Window chrome -->
              <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200">
                <div class="flex gap-1.5">
                  <div class="w-3 h-3 rounded-full bg-red-400"></div>
                  <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                  <div class="w-3 h-3 rounded-full bg-green-400"></div>
                </div>
                <span class="text-sm text-gray-500 ml-2">Automation Builder</span>
                <div class="ml-auto">
                  <div id="auto-status" class="flex items-center gap-1.5 px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-500 transition-all duration-300">
                    <div class="w-1.5 h-1.5 rounded-full bg-gray-400"></div>
                    <span>Idle</span>
                  </div>
                </div>
              </div>

              <div class="h-[340px] p-6 bg-gradient-to-br from-gray-50 to-white relative">
                <!-- Automation flow -->
                <div class="flex items-center justify-center gap-4 h-[calc(100%-80px)]">
                  <!-- Trigger -->
                  <div id="auto-trigger" class="w-40 opacity-0 translate-y-4 transition-all duration-500">
                    <div class="bg-purple-50 border-2 border-purple-200 rounded-xl p-4 text-center relative">
                      <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded">TRIGGER</div>
                      <div class="w-10 h-10 mx-auto rounded-full bg-purple-100 flex items-center justify-center mb-2">
                        <Icon name="bx:envelope" class="w-5 h-5 text-purple-600" />
                      </div>
                      <p class="text-xs font-medium text-gray-800">Form Submitted</p>
                      <p class="text-[10px] text-gray-500 mt-1">Contact Form</p>
                    </div>
                  </div>

                  <!-- Arrow 1 -->
                  <div id="auto-arrow-1" class="flex items-center opacity-0 transition-all duration-300">
                    <div class="w-8 h-0.5 bg-gray-300"></div>
                    <Icon name="bx:chevron-right" class="w-4 h-4 text-gray-400 -ml-1" />
                  </div>

                  <!-- Condition -->
                  <div id="auto-condition" class="w-40 opacity-0 translate-y-4 transition-all duration-500">
                    <div class="bg-amber-50 border-2 border-amber-200 rounded-xl p-4 text-center relative">
                      <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[10px] font-medium rounded">CONDITION</div>
                      <div class="w-10 h-10 mx-auto rounded-full bg-amber-100 flex items-center justify-center mb-2">
                        <Icon name="bx:git-branch" class="w-5 h-5 text-amber-600" />
                      </div>
                      <p class="text-xs font-medium text-gray-800">Topic = Sales</p>
                      <p class="text-[10px] text-gray-500 mt-1">Check field value</p>
                    </div>
                  </div>

                  <!-- Arrow 2 -->
                  <div id="auto-arrow-2" class="flex items-center opacity-0 transition-all duration-300">
                    <div class="w-8 h-0.5 bg-gray-300"></div>
                    <Icon name="bx:chevron-right" class="w-4 h-4 text-gray-400 -ml-1" />
                  </div>

                  <!-- Action -->
                  <div id="auto-action" class="w-40 opacity-0 translate-y-4 transition-all duration-500">
                    <div class="bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center relative">
                      <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-green-500 text-white text-[10px] font-medium rounded">ACTION</div>
                      <div class="w-10 h-10 mx-auto rounded-full bg-green-100 flex items-center justify-center mb-2">
                        <Icon name="bx:user-plus" class="w-5 h-5 text-green-600" />
                      </div>
                      <p class="text-xs font-medium text-gray-800">Assign to Sales</p>
                      <p class="text-[10px] text-gray-500 mt-1">Route to team</p>
                    </div>
                  </div>
                </div>

                <!-- Execution log -->
                <div id="auto-log" class="absolute bottom-4 left-4 right-4 opacity-0 translate-y-4 transition-all duration-500">
                  <div class="bg-gray-900 rounded-lg p-3 max-w-md mx-auto">
                    <div class="flex items-center gap-2 mb-2">
                      <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></div>
                      <span class="text-[10px] text-gray-400 font-mono">Automation running...</span>
                    </div>
                    <div class="space-y-1 text-[10px] font-mono">
                      <p id="auto-log-1" class="text-gray-500 opacity-0 transition-all duration-300">‚Üí Trigger: Form submission received</p>
                      <p id="auto-log-2" class="text-gray-500 opacity-0 transition-all duration-300">‚Üí Condition: Topic = "Sales" ‚úì</p>
                      <p id="auto-log-3" class="text-green-400 opacity-0 transition-all duration-300">‚Üí Action: Assigned to Sales team</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </Container>
  </section>

  <!-- Customer Logos -->
  <CustomerLogos />

  <!-- Feature Highlights -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">Everything your team needs</h2>
        <p class="text-lg mt-4 text-gray-600 max-w-3xl mx-auto">
          Stop switching between apps. Manage all customer communication from one powerful inbox.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:envelope-open" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Shared Inbox</h3>
          <p class="text-gray-600">Shared inbox for your entire team. See who's handling what in real-time.</p>
        </div>

        <div class="bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:conversation" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Forms to Conversations</h3>
          <p class="text-gray-600">Every form submission becomes a conversation you can reply to.</p>
        </div>

        <div class="bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:user-circle" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Contact Hub</h3>
          <p class="text-gray-600">Every contact builds a profile. See their full history at a glance.</p>
        </div>

        <div class="bg-white rounded-xl border border-gray-200 p-8 hover:shadow-lg transition-all">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <Icon name="bx:bot" class="w-6 h-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Automation</h3>
          <p class="text-gray-600">Auto-assign, tag, and route based on content or form fields.</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Forms Integration -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div>
          <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mb-6">Forms flow straight to your inbox</h2>
          <p class="text-lg text-gray-600 mb-8">
            Every form submission from Shout becomes a conversation. Reply directly and they receive your response by email.
          </p>
          <div class="space-y-4">
            <div class="flex items-start gap-3">
              <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0 mt-0.5" />
              <p class="text-gray-600">Contact forms create instant conversations</p>
            </div>
            <div class="flex items-start gap-3">
              <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0 mt-0.5" />
              <p class="text-gray-600">Survey responses arrive for follow-up</p>
            </div>
            <div class="flex items-start gap-3">
              <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0 mt-0.5" />
              <p class="text-gray-600">Quiz results ready for personalized outreach</p>
            </div>
            <div class="flex items-start gap-3">
              <Icon name="bx:check-circle" class="w-6 h-6 text-green-500 flex-shrink-0 mt-0.5" />
              <p class="text-gray-600">Calculator submissions with full context</p>
            </div>
          </div>
        </div>

        <div class="lg:pl-8">
          <div class="bg-white rounded-lg shadow-xl border border-gray-200 p-6">
            <div class="flex items-center gap-3 mb-4 pb-4 border-b">
              <div class="w-3 h-3 rounded-full bg-red-400"></div>
              <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
              <div class="w-3 h-3 rounded-full bg-green-400"></div>
              <span class="ml-2 text-sm text-gray-500">Team Inbox</span>
            </div>
            <div class="space-y-3">
              <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                <Icon name="bx:file" class="w-5 h-5 text-blue-600" />
                <div class="flex-1">
                  <p class="text-sm font-medium">New form submission</p>
                  <p class="text-xs text-gray-500">Contact form - Sarah Johnson</p>
                </div>
                <span class="text-xs text-gray-400">2m</span>
              </div>
              <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                <Icon name="bx:envelope" class="w-5 h-5 text-gray-600" />
                <div class="flex-1">
                  <p class="text-sm font-medium">Re: Project update</p>
                  <p class="text-xs text-gray-500">support@company.com</p>
                </div>
                <span class="text-xs text-gray-400">15m</span>
              </div>
              <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                <Icon name="bx:bar-chart-alt-2" class="w-5 h-5 text-gray-600" />
                <div class="flex-1">
                  <p class="text-sm font-medium">Survey response</p>
                  <p class="text-xs text-gray-500">Customer satisfaction - NPS 9</p>
                </div>
                <span class="text-xs text-gray-400">1h</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </Container>
  </section>

  <!-- Team Collaboration Features -->
  <section class="py-16">
    <Container>
      <div class="mb-12 text-center">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">Built for team collaboration</h2>
        <p class="text-lg mt-4 text-gray-600 max-w-3xl mx-auto">
          Work together without stepping on each other's toes.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow">
          <div class="flex items-center mb-3">
            <Icon name="bx:user-plus" class="w-8 h-8 text-primary mr-3" />
            <h3 class="text-lg font-semibold text-primary">Assign Conversations</h3>
          </div>
          <p class="text-gray-600">Route conversations to the right person. Everyone knows who's handling what.</p>
        </div>
        <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow">
          <div class="flex items-center mb-3">
            <Icon name="bx:group" class="w-8 h-8 text-primary mr-3" />
            <h3 class="text-lg font-semibold text-primary">Collision Detection</h3>
          </div>
          <p class="text-gray-600">See when teammates are viewing or replying to the same conversation.</p>
        </div>
        <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow">
          <div class="flex items-center mb-3">
            <Icon name="bx:comment-detail" class="w-8 h-8 text-primary mr-3" />
            <h3 class="text-lg font-semibold text-primary">Internal Notes</h3>
          </div>
          <p class="text-gray-600">Leave private notes for your team that the customer never sees.</p>
        </div>
        <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow">
          <div class="flex items-center mb-3">
            <Icon name="bx:at" class="w-8 h-8 text-primary mr-3" />
            <h3 class="text-lg font-semibold text-primary">@Mentions</h3>
          </div>
          <p class="text-gray-600">Tag colleagues to loop them into conversations or ask for input.</p>
        </div>
        <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow">
          <div class="flex items-center mb-3">
            <Icon name="bx:purchase-tag" class="w-8 h-8 text-primary mr-3" />
            <h3 class="text-lg font-semibold text-primary">Tags & Labels</h3>
          </div>
          <p class="text-gray-600">Organize with tags. Filter by type, priority, or any category you need.</p>
        </div>
        <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow">
          <div class="flex items-center mb-3">
            <Icon name="bx:search" class="w-8 h-8 text-primary mr-3" />
            <h3 class="text-lg font-semibold text-primary">Instant Search</h3>
          </div>
          <p class="text-gray-600">Find any conversation instantly. Search by name, email, or content.</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Integrated Solutions -->
  <Features />

  <!-- Final CTA -->
  <section class="py-16 bg-gray-50">
    <Container>
      <div class="text-center max-w-4xl mx-auto">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mb-6">Ready to unify your team's inbox?</h2>
        <p class="text-lg text-gray-600 mb-8">Join thousands of teams using Shout to manage conversations and never miss a message.</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href="https://identity.shout.com/Account/Register">Start your Free Trial</Button>
          <Button variant="outline" href="/pricing/">View Pricing</Button>
        </div>
      </div>
    </Container>
  </section>

</AstroshipLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabButtons = document.querySelectorAll('.tab-button');
    const videoPanels = document.querySelectorAll('.video-panel');
    const descriptions = document.querySelectorAll('.tab-description');

    // Tab order for auto-cycling
    const tabOrder = ['inbox', 'tickets', 'contacts', 'automation'];
    let currentTabIndex = 0;

    // Animation state
    let inboxTimeouts = [], f2cTimeouts = [], contactsTimeouts = [], autoTimeouts = [];
    let inboxRunning = false, f2cRunning = false, contactsRunning = false, autoRunning = false;

    // Start inbox animation on load
    setTimeout(() => runInboxAnimation(), 500);

    function switchToTab(tabId) {
      currentTabIndex = tabOrder.indexOf(tabId);

      // Update button styles
      tabButtons.forEach(btn => {
        btn.classList.remove('bg-white', 'shadow-sm', 'text-gray-900');
        btn.classList.add('text-gray-600');
        if (btn.getAttribute('data-tab') === tabId) {
          btn.classList.add('bg-white', 'shadow-sm', 'text-gray-900');
          btn.classList.remove('text-gray-600');
        }
      });

      // Show/hide panels
      videoPanels.forEach(panel => {
        if (panel.getAttribute('data-video-panel') === tabId) {
          panel.classList.remove('hidden');
          panel.classList.add('block');
        } else {
          panel.classList.add('hidden');
          panel.classList.remove('block');
        }
      });

      // Show/hide descriptions
      descriptions.forEach(desc => {
        if (desc.getAttribute('data-description') === tabId) {
          desc.classList.remove('hidden');
          desc.classList.add('block');
        } else {
          desc.classList.add('hidden');
          desc.classList.remove('block');
        }
      });

      // Stop and reset all animations
      stopInboxAnimation(); resetInboxAnimation();
      stopF2CAnimation(); resetF2CAnimation();
      stopContactsAnimation(); resetContactsAnimation();
      stopAutoAnimation(); resetAutoAnimation();

      // Start relevant animation
      setTimeout(() => {
        if (tabId === 'inbox') runInboxAnimation();
        else if (tabId === 'tickets') runF2CAnimation();
        else if (tabId === 'contacts') runContactsAnimation();
        else if (tabId === 'automation') runAutoAnimation();
      }, 500);
    }

    function nextTab() {
      currentTabIndex = (currentTabIndex + 1) % tabOrder.length;
      switchToTab(tabOrder[currentTabIndex]);
    }

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');
        switchToTab(tabId);
      });
    });

    // Helper functions
    function showElement(id) {
      const el = document.getElementById(id);
      if (el) {
        el.classList.remove('opacity-0', 'translate-y-4', 'translate-x-4');
        el.classList.add('opacity-100', 'translate-y-0', 'translate-x-0');
      }
    }

    function hideElement(id) {
      const el = document.getElementById(id);
      if (el) {
        el.classList.add('opacity-0', 'translate-y-4');
        el.classList.remove('opacity-100', 'translate-y-0');
      }
    }

    // ========== SHARED INBOX ANIMATION ==========
    // Typewriter effect for collaborative editing
    function typeText(elementId, text, speed = 40) {
      const el = document.getElementById(elementId);
      if (!el) return;
      let i = 0;
      el.textContent = '';
      function type() {
        if (i < text.length) {
          el.textContent += text.charAt(i);
          i++;
          inboxTimeouts.push(setTimeout(type, speed));
        }
      }
      type();
    }

    function runInboxAnimation() {
      if (inboxRunning) return;
      inboxRunning = true;

      const timeline = [
        // Show Emma's message
        { delay: 500, action: () => showElement('inbox-msg-1') },

        // Kate joins
        { delay: 1200, action: () => {
          const kate = document.getElementById('inbox-kate-avatar');
          if (kate) { kate.classList.remove('opacity-0'); kate.classList.add('opacity-100'); }
        }},

        // Viewing indicator (Kate viewing)
        { delay: 1600, action: () => {
          const indicator = document.getElementById('inbox-viewing-indicator');
          const badge = document.getElementById('inbox-new-badge');
          if (indicator) { indicator.classList.remove('opacity-0'); indicator.classList.add('opacity-100'); }
          if (badge) badge.classList.add('hidden');
        }},

        // Editor activates
        { delay: 2000, action: () => {
          const placeholder = document.getElementById('inbox-editor-placeholder');
          const content = document.getElementById('inbox-editor-content');
          const toolbar = document.getElementById('inbox-editor-toolbar');
          const collab = document.getElementById('inbox-collab-indicator');
          if (placeholder) placeholder.classList.add('hidden');
          if (content) content.classList.remove('hidden');
          if (toolbar) { toolbar.classList.remove('opacity-0'); toolbar.classList.add('opacity-100'); }
          if (collab) { collab.classList.remove('opacity-0'); collab.classList.add('opacity-100'); }
        }},

        // Kate types first part
        { delay: 2300, action: () => typeText('inbox-typed-kate1', 'Hi Emma! Thanks for reaching out. ', 30) },

        // Kate types the ending (leaving gap in middle for pricing)
        { delay: 3800, action: () => typeText('inbox-typed-kate2', ' Would you have time for a quick call?', 30) },

        // Kate opens internal thread asking Tom for help with pricing
        { delay: 5500, action: () => {
          showElement('inbox-internal-thread');
        }},

        // Tom joins (avatar becomes active)
        { delay: 6500, action: () => {
          const tom = document.getElementById('inbox-tom-avatar');
          const tomViewing = document.getElementById('inbox-viewing-tom');
          if (tom) { tom.classList.remove('opacity-50'); tom.classList.add('opacity-100'); }
          if (tomViewing) { tomViewing.classList.remove('opacity-0'); tomViewing.classList.add('opacity-100'); }
        }},

        // Tom replies in internal thread
        { delay: 7200, action: () => {
          const reply = document.getElementById('inbox-internal-tom-reply');
          if (reply) { reply.classList.remove('opacity-0'); reply.classList.add('opacity-100'); }
        }},

        // Tom's cursor appears in the gap + collab indicator shows Tom
        { delay: 8000, action: () => {
          const cursor = document.getElementById('inbox-cursor-tom');
          const collabTom = document.getElementById('inbox-collab-tom');
          if (cursor) { cursor.classList.remove('opacity-0'); cursor.classList.add('opacity-100'); }
          if (collabTom) { collabTom.classList.remove('opacity-0'); collabTom.classList.add('opacity-100'); }
        }},

        // Tom fills in the pricing details in the middle
        { delay: 8400, action: () => typeText('inbox-typed-tom', 'We offer custom pricing for 500+ users.', 25) },

        // Tom's cursor disappears (he's done typing)
        { delay: 10500, action: () => {
          const cursor = document.getElementById('inbox-cursor-tom');
          if (cursor) { cursor.classList.add('opacity-0'); cursor.classList.remove('opacity-100'); }
        }},

        // Send button activates (Tom will submit)
        { delay: 11000, action: () => {
          const btn = document.getElementById('inbox-send-btn');
          if (btn) {
            btn.classList.remove('bg-gray-200', 'text-gray-400');
            btn.classList.add('bg-gray-900', 'text-white');
          }
        }},

        // Tom sends: editor clears, message appears in chat
        { delay: 11800, action: () => {
          // Clear and reset editor
          const content = document.getElementById('inbox-editor-content');
          const placeholder = document.getElementById('inbox-editor-placeholder');
          const btn = document.getElementById('inbox-send-btn');
          const typedKate1 = document.getElementById('inbox-typed-kate1');
          const typedTom = document.getElementById('inbox-typed-tom');
          const typedKate2 = document.getElementById('inbox-typed-kate2');

          if (typedKate1) typedKate1.textContent = '';
          if (typedTom) typedTom.textContent = '';
          if (typedKate2) typedKate2.textContent = '';
          if (content) content.classList.add('hidden');
          if (placeholder) placeholder.classList.remove('hidden');
          if (btn) {
            btn.classList.add('bg-gray-200', 'text-gray-400');
            btn.classList.remove('bg-gray-900', 'text-white');
          }

          // Show sent message in chat
          showElement('inbox-sent-reply');
        }},

        // Hide toolbar and collab indicator after send
        { delay: 12300, action: () => {
          const toolbar = document.getElementById('inbox-editor-toolbar');
          const collab = document.getElementById('inbox-collab-indicator');
          const collabTom = document.getElementById('inbox-collab-tom');
          if (toolbar) { toolbar.classList.add('opacity-0'); toolbar.classList.remove('opacity-100'); }
          if (collab) { collab.classList.add('opacity-0'); collab.classList.remove('opacity-100'); }
          if (collabTom) { collabTom.classList.add('opacity-0'); collabTom.classList.remove('opacity-100'); }
        }},

        // Next tab
        { delay: 17000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        inboxTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function stopInboxAnimation() {
      inboxRunning = false;
      inboxTimeouts.forEach(t => clearTimeout(t));
      inboxTimeouts = [];
    }

    function resetInboxAnimation() {
      // Reset messages
      hideElement('inbox-msg-1');
      hideElement('inbox-internal-thread');
      hideElement('inbox-sent-reply');

      // Reset avatars
      const kate = document.getElementById('inbox-kate-avatar');
      const tom = document.getElementById('inbox-tom-avatar');
      if (kate) { kate.classList.add('opacity-0'); kate.classList.remove('opacity-100'); }
      if (tom) { tom.classList.add('opacity-50'); tom.classList.remove('opacity-100'); }

      // Reset viewing indicators
      const indicator = document.getElementById('inbox-viewing-indicator');
      const tomViewing = document.getElementById('inbox-viewing-tom');
      const badge = document.getElementById('inbox-new-badge');
      if (indicator) { indicator.classList.add('opacity-0'); indicator.classList.remove('opacity-100'); }
      if (tomViewing) { tomViewing.classList.add('opacity-0'); tomViewing.classList.remove('opacity-100'); }
      if (badge) badge.classList.remove('hidden');

      // Reset editor
      const placeholder = document.getElementById('inbox-editor-placeholder');
      const content = document.getElementById('inbox-editor-content');
      const toolbar = document.getElementById('inbox-editor-toolbar');
      const collab = document.getElementById('inbox-collab-indicator');
      const collabTom = document.getElementById('inbox-collab-tom');
      if (placeholder) placeholder.classList.remove('hidden');
      if (content) content.classList.add('hidden');
      if (toolbar) { toolbar.classList.add('opacity-0'); toolbar.classList.remove('opacity-100'); }
      if (collab) { collab.classList.add('opacity-0'); collab.classList.remove('opacity-100'); }
      if (collabTom) { collabTom.classList.add('opacity-0'); collabTom.classList.remove('opacity-100'); }

      // Reset cursor and typed text
      const cursorTom = document.getElementById('inbox-cursor-tom');
      const typedKate1 = document.getElementById('inbox-typed-kate1');
      const typedTom = document.getElementById('inbox-typed-tom');
      const typedKate2 = document.getElementById('inbox-typed-kate2');
      if (cursorTom) { cursorTom.classList.add('opacity-0'); cursorTom.classList.remove('opacity-100'); }
      if (typedKate1) typedKate1.textContent = '';
      if (typedTom) typedTom.textContent = '';
      if (typedKate2) typedKate2.textContent = '';

      // Reset internal thread
      const tomReply = document.getElementById('inbox-internal-tom-reply');
      if (tomReply) { tomReply.classList.add('opacity-0'); tomReply.classList.remove('opacity-100'); }

      // Reset send button
      const btn = document.getElementById('inbox-send-btn');
      if (btn) {
        btn.classList.add('bg-gray-200', 'text-gray-400');
        btn.classList.remove('bg-gray-900', 'text-white');
      }
    }

    // ========== FORMS TO CONVERSATIONS ANIMATION ==========
    function runF2CAnimation() {
      if (f2cRunning) return;
      f2cRunning = true;

      const timeline = [
        { delay: 500, action: () => window['typeText_f2c-fname'] && window['typeText_f2c-fname']('Jane', 80) },
        { delay: 1200, action: () => window['typeText_f2c-lname'] && window['typeText_f2c-lname']('Cooper', 80) },
        { delay: 2000, action: () => window['typeText_f2c-email'] && window['typeText_f2c-email']('jane@company.com', 50) },
        { delay: 3300, action: () => {
          window['f2c-formSetProgress'] && window['f2c-formSetProgress'](33);
          window['hideBar_f2c-q1'] && window['hideBar_f2c-q1']();
          window['showBar_f2c-q2'] && window['showBar_f2c-q2']();
        }},
        { delay: 3800, action: () => window['selectOption_f2c-topic'] && window['selectOption_f2c-topic']('a') },
        { delay: 4500, action: () => {
          window['f2c-formSetProgress'] && window['f2c-formSetProgress'](66);
          window['hideBar_f2c-q2'] && window['hideBar_f2c-q2']();
          window['showBar_f2c-q3'] && window['showBar_f2c-q3']();
        }},
        { delay: 5000, action: () => window['fillStars_f2c-urgency'] && window['fillStars_f2c-urgency'](4) },
        { delay: 5700, action: () => window['f2c-formSetProgress'] && window['f2c-formSetProgress'](100) },
        { delay: 6300, action: () => window['f2c-demoFocusPanel'] && window['f2c-demoFocusPanel']('right') },
        { delay: 6800, action: () => {
          const ticket = document.getElementById('f2c-ticket-new');
          if (ticket) { ticket.classList.remove('opacity-0'); ticket.classList.add('opacity-100'); }
        }},
        { delay: 7300, action: () => showElement('f2c-msg-1') },
        { delay: 8500, action: () => showElement('f2c-msg-2') },
        { delay: 12000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        f2cTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function stopF2CAnimation() {
      f2cRunning = false;
      f2cTimeouts.forEach(t => clearTimeout(t));
      f2cTimeouts = [];
    }

    function resetF2CAnimation() {
      window['f2c-formSetProgress'] && window['f2c-formSetProgress'](0);
      window['showBar_f2c-q1'] && window['showBar_f2c-q1']();
      window['hideBar_f2c-q2'] && window['hideBar_f2c-q2']();
      window['hideBar_f2c-q3'] && window['hideBar_f2c-q3']();
      window['resetText_f2c-fname'] && window['resetText_f2c-fname']();
      window['resetText_f2c-lname'] && window['resetText_f2c-lname']();
      window['resetText_f2c-email'] && window['resetText_f2c-email']();
      window['resetOption_f2c-topic'] && window['resetOption_f2c-topic']();
      window['resetStars_f2c-urgency'] && window['resetStars_f2c-urgency']();
      const ticket = document.getElementById('f2c-ticket-new');
      if (ticket) { ticket.classList.add('opacity-0'); ticket.classList.remove('opacity-100'); }
      hideElement('f2c-msg-1');
      hideElement('f2c-msg-2');
      window['f2c-demoFocusPanel'] && window['f2c-demoFocusPanel']('left');
    }

    // ========== CONTACT HUB ANIMATION ==========
    function runContactsAnimation() {
      if (contactsRunning) return;
      contactsRunning = true;

      const timeline = [
        // Show status badge
        { delay: 400, action: () => showElement('contact-status') },
        // Show NPS card with gauge animation
        { delay: 800, action: () => {
          showElement('contact-nps-card');
          setTimeout(() => {
            const marker = document.getElementById('contact-nps-marker');
            if (marker) marker.style.left = '90%'; // 9/10 = 90%
          }, 200);
        }},
        // Show stats
        { delay: 1200, action: () => showElement('contact-stat-1') },
        { delay: 1400, action: () => showElement('contact-stat-2') },
        { delay: 1800, action: () => showElement('contact-value-card') },
        // Show activity items
        { delay: 2200, action: () => showElement('contact-activity-5') },
        { delay: 2500, action: () => showElement('contact-activity-4') },
        { delay: 2800, action: () => showElement('contact-activity-3') },
        { delay: 3100, action: () => showElement('contact-activity-2') },
        { delay: 3400, action: () => showElement('contact-activity-1') },
        { delay: 10000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        contactsTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function stopContactsAnimation() {
      contactsRunning = false;
      contactsTimeouts.forEach(t => clearTimeout(t));
      contactsTimeouts = [];
    }

    function resetContactsAnimation() {
      // Reset activity items
      ['contact-activity-1', 'contact-activity-2', 'contact-activity-3', 'contact-activity-4', 'contact-activity-5'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.classList.add('opacity-0', 'translate-x-4');
          el.classList.remove('opacity-100', 'translate-x-0');
        }
      });
      // Reset metrics
      hideElement('contact-status');
      hideElement('contact-nps-card');
      hideElement('contact-stat-1');
      hideElement('contact-stat-2');
      hideElement('contact-value-card');
      // Reset NPS marker
      const marker = document.getElementById('contact-nps-marker');
      if (marker) marker.style.left = '0%';
    }

    // ========== AUTOMATION ANIMATION ==========
    function runAutoAnimation() {
      if (autoRunning) return;
      autoRunning = true;

      const timeline = [
        { delay: 500, action: () => showElement('auto-trigger') },
        { delay: 1000, action: () => {
          const arrow = document.getElementById('auto-arrow-1');
          if (arrow) { arrow.classList.remove('opacity-0'); arrow.classList.add('opacity-100'); }
        }},
        { delay: 1200, action: () => showElement('auto-condition') },
        { delay: 1700, action: () => {
          const arrow = document.getElementById('auto-arrow-2');
          if (arrow) { arrow.classList.remove('opacity-0'); arrow.classList.add('opacity-100'); }
        }},
        { delay: 1900, action: () => showElement('auto-action') },
        // Activate status
        { delay: 2800, action: () => {
          const status = document.getElementById('auto-status');
          if (status) {
            status.classList.remove('bg-gray-100', 'text-gray-500');
            status.classList.add('bg-green-100', 'text-green-700');
            status.innerHTML = '<div class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></div><span>Running</span>';
          }
        }},
        // Show log
        { delay: 3500, action: () => showElement('auto-log') },
        { delay: 4000, action: () => {
          const log = document.getElementById('auto-log-1');
          if (log) { log.classList.remove('opacity-0'); log.classList.add('opacity-100'); }
        }},
        { delay: 4500, action: () => {
          const log = document.getElementById('auto-log-2');
          if (log) { log.classList.remove('opacity-0'); log.classList.add('opacity-100'); }
        }},
        { delay: 5000, action: () => {
          const log = document.getElementById('auto-log-3');
          if (log) { log.classList.remove('opacity-0'); log.classList.add('opacity-100'); }
        }},
        // Highlight action completion
        { delay: 5500, action: () => {
          const action = document.getElementById('auto-action');
          if (action) {
            const inner = action.querySelector('div');
            if (inner) {
              inner.classList.remove('border-green-200');
              inner.classList.add('border-green-500', 'shadow-lg', 'shadow-green-200');
            }
          }
        }},
        { delay: 10000, action: () => nextTab() },
      ];

      timeline.forEach(item => {
        autoTimeouts.push(setTimeout(item.action, item.delay));
      });
    }

    function stopAutoAnimation() {
      autoRunning = false;
      autoTimeouts.forEach(t => clearTimeout(t));
      autoTimeouts = [];
    }

    function resetAutoAnimation() {
      hideElement('auto-trigger');
      hideElement('auto-condition');
      hideElement('auto-action');
      hideElement('auto-log');
      ['auto-arrow-1', 'auto-arrow-2'].forEach(id => {
        const el = document.getElementById(id);
        if (el) { el.classList.add('opacity-0'); el.classList.remove('opacity-100'); }
      });
      ['auto-log-1', 'auto-log-2', 'auto-log-3'].forEach(id => {
        const el = document.getElementById(id);
        if (el) { el.classList.add('opacity-0'); el.classList.remove('opacity-100'); }
      });
      const status = document.getElementById('auto-status');
      if (status) {
        status.classList.add('bg-gray-100', 'text-gray-500');
        status.classList.remove('bg-green-100', 'text-green-700');
        status.innerHTML = '<div class="w-1.5 h-1.5 rounded-full bg-gray-400"></div><span>Idle</span>';
      }
      const action = document.getElementById('auto-action');
      if (action) {
        const inner = action.querySelector('div');
        if (inner) {
          inner.classList.add('border-green-200');
          inner.classList.remove('border-green-500', 'shadow-lg', 'shadow-green-200');
        }
      }
    }
  });
</script>
