---
/**
 * FormCard - The blue form card wrapper with progress bar
 *
 * Wraps form content with Shout-style blue background and yellow progress bar.
 */
export interface Props {
  title: string;
  id?: string;
  bgColor?: string;
}

const {
  title,
  id = 'form-card',
  bgColor = 'bg-[#2A98C6]'
} = Astro.props;
---

<div
  id={id}
  class={`bg-white rounded-xl shadow-2xl border border-gray-200 flex flex-col relative overflow-hidden h-full`}
>
  <!-- Window chrome header -->
  <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200">
    <div class="flex gap-1.5">
      <div class="w-3 h-3 rounded-full bg-red-400"></div>
      <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
      <div class="w-3 h-3 rounded-full bg-green-400"></div>
    </div>
    <span class="text-sm text-gray-500 ml-2">{title}</span>
  </div>

  <!-- Content -->
  <div class={`${bgColor} flex-1 flex flex-col relative`}>
    <!-- Yellow progress bar -->
    <div id={`${id}-progress`} class="absolute top-0 left-0 w-0 h-1 bg-yellow-400 transition-all duration-500"></div>

    <div class="p-6 pt-5 flex-1 flex flex-col">
      <!-- Title -->
      <h3 class="text-xl font-bold text-white mb-6">{title}</h3>

      <slot />
    </div>
  </div>
</div>

<script define:vars={{ id }}>
  // Set progress bar width
  window[`${id}SetProgress`] = function(percent) {
    document.getElementById(`${id}-progress`).style.width = `${percent}%`;
  };
</script>
